<!-- build time:Tue Oct 12 2021 10:23:20 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2"><meta name="google-site-verification" content="4fXg7_br-6EcJkwb-a6Ci2NLdRf7aMleAsM1L9S1nBI"><link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/2.ico?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/1.ico?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!0,fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="导图一、SQL语言概述1、SQL语言的功能概述DDL（Data Definition Languages）语句：数据定义语言，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象的定义。常用的语句关键字主要包括 create、drop、alter等。DML（Data Manipulation Language）语句：数据操纵语句，用于添加、删除、更新和查询数据库记录，并检查数据完整性，常用"><meta name="keywords" content="数据库系统概论"><meta property="og:type" content="article"><meta property="og:title" content="数据库系统概论【三】"><meta property="og:url" content="http://lyxf2000.github.io/posts/128cc561/index.html"><meta property="og:site_name" content="乐屿心扉"><meta property="og:description" content="导图一、SQL语言概述1、SQL语言的功能概述DDL（Data Definition Languages）语句：数据定义语言，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象的定义。常用的语句关键字主要包括 create、drop、alter等。DML（Data Manipulation Language）语句：数据操纵语句，用于添加、删除、更新和查询数据库记录，并检查数据完整性，常用"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/SQL.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103347.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103405.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103909.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325104116.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325104922.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325105536.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325105725.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325110136.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325111354.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325112143.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325120731.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325121741.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325122305.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326095504.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326101200.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326101528.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104017.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104212.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104350.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402135031.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402142446.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402144738.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402161148.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402164532.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402165133.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402165421.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402174310.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402174414.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402175358.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402175433.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402183021.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402183518.png"><meta property="og:updated_time" content="2020-06-29T15:17:46.301Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="数据库系统概论【三】"><meta name="twitter:description" content="导图一、SQL语言概述1、SQL语言的功能概述DDL（Data Definition Languages）语句：数据定义语言，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象的定义。常用的语句关键字主要包括 create、drop、alter等。DML（Data Manipulation Language）语句：数据操纵语句，用于添加、删除、更新和查询数据库记录，并检查数据完整性，常用"><meta name="twitter:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/SQL.png"><link rel="canonical" href="http://lyxf2000.github.io/posts/128cc561/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>数据库系统概论【三】 | 乐屿心扉</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">乐屿心扉</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Keep Thinking</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-playlist"><a href="/playlist/" rel="section"><i class="menu-item-icon fa fa-fw fa-music"></i><br>歌单</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://lyxf2000.github.io/posts/128cc561/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="峻源"><meta itemprop="description" content="乐于心，乐与心，乐之屿，心扉间"><meta itemprop="image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乐屿心扉"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">数据库系统概论【三】</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-24 08:21:50" itemprop="dateCreated datePublished" datetime="2020-03-24T08:21:50+08:00">2020-03-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-29 23:17:46" itemprop="dateModified" datetime="2020-06-29T23:17:46+08:00">2020-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数据库系统概论/" itemprop="url" rel="index"><span itemprop="name">数据库系统概论</span></a></span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">字数统计:</span> <span class="post-count">7.7k(字)</span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">30(分)</span></span><br><p></p></div></header><div class="post-body" itemprop="articleBody"><h2 id="导图"><a href="#导图" class="headerlink" title="导图"></a>导图</h2><hr><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/SQL.png" alt></p><h2 id="一、SQL语言概述"><a href="#一、SQL语言概述" class="headerlink" title="一、SQL语言概述"></a>一、SQL语言概述</h2><hr><h3 id="1、SQL语言的功能概述"><a href="#1、SQL语言的功能概述" class="headerlink" title="1、SQL语言的功能概述"></a>1、SQL语言的功能概述</h3><ul><li><strong>DDL（Data Definition Languages）语句：数据定义语言</strong>，这些语句定义了不同的数据段、数据库、表、列、索引等数据库对象的定义。<strong>常用的语句关键字主要包括 create、drop、alter等。</strong></li></ul><ul><li><strong>DML（Data Manipulation Language）语句：数据操纵语句</strong>，用于添加、删除、更新和查询数据库记录，并检查数据完整性，常用的语句关键字<strong>主要包括 insert、delete、udpate 和select 等。(增添改查）</strong></li><li><strong>DCL（Data Control Language）语句：数据控制语句</strong>，用于控制不同数据段直接的许可和访问级别的语句。这些语句定义了数据库、表、字段、用户的访问权限和安全级别。主<strong>要的语句关键字包括 grant、revoke 等。</strong></li></ul><p><strong>SQL由分为：交互式SQL、嵌入式SQL、动态SQL等。</strong></p><p><font size="4" color="red"><strong>之后学习举例使用的数据库：</strong></font></p><ul><li><p><strong>学生：学号S#, 姓名Sname, 性别Ssex, 年龄Sage, 所属系别D#，班级Sclass</strong></p><p><strong>Student ( S# char(8), Sname char(10), Ssex char(2),Sage integer, D# char(2), Sclass char(6) )</strong></p></li><li><p><strong>院系：系别D#，系名Dname, 系主任Dean</strong></p><p><strong>Dept ( D# char(2), Dname char(10), Dean char(10) )</strong></p></li><li><p><strong>课程：课号C#, 课名Cname, 教师编号T#, 学时Chours，学分Credit</strong></p><p><strong>Course ( C# char(3), Cname char(12), Chours integer,Credit float(1), T# char(3) )</strong></p></li><li><p><strong>教师：教师编号T#，教师名Tname, 所属院系D#，工资Salary</strong></p><p><strong>Teacher ( T# char(3), Tname char(10), D# char(2),Salary float(2) )</strong></p></li><li><p><strong>选课：学号S#, 课号C#, 成绩Score</strong></p><p><strong>SC ( S# char(8), C# char(3), Score float(1) )</strong></p></li></ul><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103347.png" alt></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103405.png" alt></p><h3 id="2、利用SQL语言建立数据库"><a href="#2、利用SQL语言建立数据库" class="headerlink" title="2、利用SQL语言建立数据库"></a>2、利用SQL语言建立数据库</h3><p><strong>建立数据库包括两件事：定义数据库和表（使用DDL）,向表中追加元组（使用DML）</strong></p><h4 id="1-SQL-DDL"><a href="#1-SQL-DDL" class="headerlink" title="(1)SQL-DDL"></a>(1)SQL-DDL</h4><p><strong>DDL具有很多功能，这里我们学习简单的创建数据库，后面功能再陆续介绍</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325103909.png" alt></p><h4 id="2-创建数据库的语句—Create-Database"><a href="#2-创建数据库的语句—Create-Database" class="headerlink" title="(2)创建数据库的语句—Create Database"></a>(2)创建数据库的语句—Create Database</h4><p><strong>数据库(Database)是若干具有相互关联关系的Table/Relation的集合, 数据库可以看作是一个集中存放若干Table的大型文件</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325104116.png" alt></p><p><strong>示例：</strong>创建课程学习数据库SCT</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> SCT;</span><br></pre></td></tr></table></figure><blockquote><p>Create Database的其他特性例如定义完整性约束等，之后介绍</p></blockquote><h4 id="3-创建关系-表的语句—Create-Table"><a href="#3-创建关系-表的语句—Create-Table" class="headerlink" title="(3)创建关系/表的语句—Create Table"></a>(3)创建关系/表的语句—Create Table</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325104922.png" alt></p><p><strong>示例：定义学生表 Student</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> Student ( S<span class="comment"># char(8) not null , Sname char(10),Ssex char(2), Sage integer, D# char(2), Sclass char(6) );</span></span><br></pre></td></tr></table></figure><p><strong>示例：定义课程表Course</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> Course ( C<span class="comment"># char(3) , Cname char(12), Chours integer,Credit float(1), T# char(3) );</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>“ [ ] ”表示其括起的内容可以省略，“ | ” 表示其隔开的两项可取其一</strong></p></li><li><p><strong>Primary key: 主键约束。</strong>每个表只能创建一个主键约束。</p></li><li><p><strong>Unique: 唯一性约束(即候选键)。</strong>可以有多个唯一性约束。</p></li><li><p><strong>Not null: 非空约束。</strong>是指该列允许不允许有空值出现，如选择了Not null表明该列不允许有空值出现。</p></li><li><p><strong>在SQL-92标准中定义的数据类型：</strong></p><ul><li><strong>char (n) :</strong>固定长度的字符串</li><li><strong>varchar (n)</strong> :可变长字符串</li><li><strong>int</strong> :整数 // 有时不同系统也写作integer</li><li><strong>numeric (p，q)</strong> :固定精度数字，小数点左边p位，右边p-q位</li><li><strong>real</strong> :浮点精度数字 //有时不同系统也写作float(n)，小数点后保留n位</li><li><strong>date</strong> :日期 (如 2003-09-12)</li><li><strong>time</strong> : 时间 (如 23:15:003)</li><li>…..</li></ul></li></ul><p><strong>现行商用DBMS的数据类型有时和上面有些差异，请注意;和高级语言的数据类型，总体上是一致的，但也有些差异。</strong></p><h4 id="4-SQL-DML"><a href="#4-SQL-DML" class="headerlink" title="(4)SQL-DML"></a>(4)SQL-DML</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325105536.png" alt></p><h4 id="5-向表中追加元组的值-–Insert-Into"><a href="#5-向表中追加元组的值-–Insert-Into" class="headerlink" title="(5)向表中追加元组的值 –Insert Into"></a>(5)向表中追加元组的值 –Insert Into</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325105725.png" alt></p><p><strong>示例：追加学生表中的元组</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> Student <span class="keyword">Values</span> ( ‘<span class="number">98030101</span>’ , ‘张三’, ‘男’, <span class="number">20</span>， ’<span class="number">03</span>’， ‘<span class="number">980301</span>’);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> Student ( S<span class="comment">#, Sname, Ssex, Sage, D# , Sclass)</span></span><br><span class="line"><span class="keyword">Values</span> ( ‘<span class="number">98030102</span>’ , ‘张四’, ‘女’, <span class="number">20</span>， ’<span class="number">03</span>’， ‘<span class="number">980301</span>’);</span><br></pre></td></tr></table></figure><p><strong>示例：追加课程表中的元组</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> Course <span class="keyword">Values</span> ( ‘<span class="number">001</span>’ , ‘数据库’, <span class="number">40</span>, <span class="number">6</span>， ’<span class="number">001</span>’); <span class="comment">/*所有列名省略，须与定义或存储的列名顺序一致*/</span></span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> Course(Cname, C<span class="comment">#, Credit, Chours, T#) Values (‘数据库’, ‘001’, 6, 40, ‘001’); /*如列名未省略，须与语句中列名的顺序一致*/</span></span><br></pre></td></tr></table></figure><ul><li><strong>values后面值的排列，须与into子句后面的列名排列一致</strong></li><li><strong>若表名后的所有列名省略， 则values后的值的排列，须与该表存储中的列名排列一致</strong></li></ul><h3 id="3、利用SQL语言进行简单查询"><a href="#3、利用SQL语言进行简单查询" class="headerlink" title="3、利用SQL语言进行简单查询"></a>3、利用SQL语言进行简单查询</h3><h4 id="1-单表查询-Select-From-Where"><a href="#1-单表查询-Select-From-Where" class="headerlink" title="(1)单表查询-Select-From-Where"></a>(1)单表查询-Select-From-Where</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325110136.png" alt></p><p><strong>示例：检索教师表中所有工资少于1500元或者工资大于2000元 并且是03系的教师姓名？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Tname</span><br><span class="line"><span class="keyword">From</span> Teacher</span><br><span class="line"><span class="keyword">Where</span> (Salary &lt; <span class="number">1500</span> <span class="keyword">or</span> Salary &gt; <span class="number">2000</span>) <span class="keyword">and</span> D<span class="comment"># = ’03’;</span></span><br></pre></td></tr></table></figure><ul><li><p><strong>语义：从表名所给出的表中，查询出满足检索条件的元组，并按给定的列名及顺序进行投影显示。相当于对表进行了选择和投影操作。</strong></p></li><li><p><strong>Select语句中的select … , from… , where…, 等被称为子句，在以上基本形式基础上会增加许多构成要素，也会增加许多新的子句，满足不同的需求。</strong></p></li><li><p><strong>如投影所有列，则可以用*来简写</strong></p></li><li><p><font size="4" color="red"><strong>逻辑运算符用 and , or,not 来表示, 同时也要注意运算符的优先次序及括弧的使用。书写要点是注意<br>对自然语言检索条件的正确理解。</strong></font></p></li></ul><h4 id="2-检索结果之去重复记录-Select-Distinct-From-Where"><a href="#2-检索结果之去重复记录-Select-Distinct-From-Where" class="headerlink" title="(2)检索结果之去重复记录-Select Distinct-From-Where"></a>(2)检索结果之去重复记录-Select Distinct-From-Where</h4><p><strong>关系模型不允许出现重复元组。但现实DBMS，却允许出现重复元组，但也允许无重复元组。</strong></p><p><font size="4" color="red"><strong>在Table中要求无重复元组是通过定义Primary key或Unique来保证的;而在检索结果中要求无重复元组, 是通过DISTINCT保留字的使用来实现的。</strong></font></p><p><strong>示例：在选课表中，检索成绩大于80分的所有学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">DISTINCT</span> S<span class="comment">#</span></span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> Score &gt; <span class="number">80</span>;</span><br><span class="line">//重复元组被DISTINCT过滤掉，只保留一份</span><br></pre></td></tr></table></figure><h4 id="3-检索结果之排序-Select-From-Where-Order-By"><a href="#3-检索结果之排序-Select-From-Where-Order-By" class="headerlink" title="(3)检索结果之排序-Select-From-Where-Order By"></a>(3)检索结果之排序-Select-From-Where-Order By</h4><p><strong>DBMS可以对检索结果进行排序，可以升序排列，也可以降序排列。</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325111354.png" alt></p><p><font size="4" color="red"><strong>ascend升序|descend降序，默认为升序</strong></font></p><p><strong>示例：按学号由小到大的顺序显示出所有学生的学号及姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Sname From Student</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> S<span class="comment"># ASC ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：检索002号课大于80分的所有同学学号并按成绩由高到低顺序显示</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’ and Score &gt; 80</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span> ;</span><br></pre></td></tr></table></figure><p>​</p><h4 id="4-模糊查询-SELECT-FROM-WHERE-LIKE"><a href="#4-模糊查询-SELECT-FROM-WHERE-LIKE" class="headerlink" title="(4)模糊查询-SELECT-FROM-WHERE * LIKE *"></a>(4)模糊查询-SELECT-FROM-WHERE * LIKE *</h4><p><strong>模糊查询问题:比如检索姓张的学生，检索张某某；这类查询问题，Select语句是通过在检索条件中引入运算符like来表示的</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325112143.png" alt></p><p>找出匹配给定字符串的字符串。其中给定字符串中可以出现%, _等匹配符.</p><p><strong>匹配规则：</strong></p><ul><li><strong>“%” 匹配零个或多个字符</strong></li><li><strong>“_” 匹配任意单个字符</strong></li><li><strong>“ \ ” 转义字符，用于去掉一些特殊字符的特定含义，使其被作为普通字符看待, 如用 “%”去匹配字符%，用<code>\_</code> 去匹配字符<code>_</code></strong></li></ul><p><strong>示例：检索所有姓张的学生学号及姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Sname From Student</span></span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Like</span> ‘张%’ ;</span><br></pre></td></tr></table></figure><p><strong>示例：检索名字为张某某的所有同学姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Like</span> ‘张_ _’;</span><br></pre></td></tr></table></figure><p><strong>示例：检索名字不姓张的所有同学姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">Not</span> <span class="keyword">Like</span> ‘张%’;</span><br></pre></td></tr></table></figure><h3 id="4、利用SQL语言进行多表联合查询"><a href="#4、利用SQL语言进行多表联合查询" class="headerlink" title="4、利用SQL语言进行多表联合查询"></a>4、利用SQL语言进行多表联合查询</h3><p><strong>多表联合检索可以通过连接运算来完成，而连接运算又可以通过广义笛卡尔积后再进行选择运算来实现。检索条件中要包含连接条件，通过不同的连接条件可以实现等值连接、不等值连接及各种连接</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325120731.png" alt></p><p><font size="4" color="red"><strong>注意:检索条件的设定决定了何种连接</strong></font></p><h4 id="1-表更名与表别名-重名处理"><a href="#1-表更名与表别名-重名处理" class="headerlink" title="(1)表更名与表别名(重名处理)"></a>(1)表更名与表别名(重名处理)</h4><p><strong>连接运算涉及到重名的问题，如两个表中的属性重名，连接的两个表重名(同一表的连接)等，因此需要使用别名以便区分</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325121741.png" alt></p><ul><li><strong>上述定义中的as 可以省略</strong></li><li><strong>当定义了别名后，在检索条件中可以使用别名来限定属性</strong></li><li><strong>有时表名很长时，为书写条件简便，也定义表别名，以简化书写</strong></li></ul><h4 id="2-等值连接"><a href="#2-等值连接" class="headerlink" title="(2)等值连接"></a>(2)等值连接</h4><p><strong>示例：按“001”号课成绩由高到低顺序显示所有学生的姓名(二表连接)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student, SC</span><br><span class="line"><span class="keyword">Where</span> Student.S<span class="comment"># = SC.S# and SC.C# = ‘001’</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p><strong>示例：按‘数据库’课成绩由高到低顺序显示所有同学姓名(三表连接)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student, SC, Course</span><br><span class="line"><span class="keyword">Where</span> Student.S<span class="comment"># = SC.S# and SC.C# = Course.C# and Cname = ‘数据库’</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">By</span> Score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p><font size="4" color="red"><strong>等值连接，检索条件就是=</strong></font></p><h4 id="2-不等值连接"><a href="#2-不等值连接" class="headerlink" title="(2)不等值连接"></a>(2)不等值连接</h4><p><strong>示例：求有薪水差额的任意两位教师</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> T1.Tname <span class="keyword">as</span> Teacher1, T2.Tname <span class="keyword">as</span> Teacher2</span><br><span class="line"><span class="keyword">From</span> Teacher T1, Teacher T2</span><br><span class="line"><span class="keyword">Where</span> T1.Salary &gt; T2.Salary ;</span><br></pre></td></tr></table></figure><p><strong>示例：求年龄有差异的任意两位同学的姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.Sname <span class="keyword">as</span> Stud1, S2.Sname <span class="keyword">as</span> Stud2</span><br><span class="line"><span class="keyword">From</span> Student S1, Student S2</span><br><span class="line"><span class="keyword">Where</span> S1.Sage &gt; S2.Sage ;</span><br></pre></td></tr></table></figure><h4 id="3-多表联合查询训练"><a href="#3-多表联合查询训练" class="headerlink" title="(3)多表联合查询训练"></a>(3)多表联合查询训练</h4><p><strong>示例：求既学过“001”号课又学过 “002”号课的所有学生的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.S<span class="comment"># </span></span><br><span class="line"><span class="keyword">From</span> SC S1, SC S2</span><br><span class="line"><span class="keyword">Where</span> S1.S<span class="comment"># = S2.S# and S1.C#=‘001’ and S2.C#=‘002 ;</span></span><br></pre></td></tr></table></figure><p><strong>求“001”号课成绩比“002”号课成绩高的所有学生的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S1.S<span class="comment"># </span></span><br><span class="line"><span class="keyword">From</span> SC S1, SC S2</span><br><span class="line"><span class="keyword">Where</span> S1.S<span class="comment"># = S2.S# and S1.C#=‘001’ and S2.C#=‘002’ and S1.Score &gt; S2.Score;</span></span><br></pre></td></tr></table></figure><p><font size="4" color="red"><strong>注意正确理解用自然语言表达的查询语义，并用SQL正确表达,有时候自然语言的直译是错误的！</strong></font></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200325122305.png" alt></p><p><strong>该写法是错误的，一个人选择的李明的课又选择了其他老师的课也会被选进去</strong></p><h3 id="5、利用SQL语言进行增-删-改"><a href="#5、利用SQL语言进行增-删-改" class="headerlink" title="5、利用SQL语言进行增-删-改"></a>5、利用SQL语言进行增-删-改</h3><h4 id="1-SQL-之Insert"><a href="#1-SQL-之Insert" class="headerlink" title="(1)SQL-之Insert"></a>(1)SQL-之Insert</h4><p><font size="4" color="red"><strong>之前我们学到insert的简单用法，用来插入一条指定元组值的元组，接下来我们学习批量插入。插入子查询结果中的若干条元组。待插入的元<br>组由子查询给出。</strong></font></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326095504.png" alt></p><p><strong>新建立Table: St(S#, Sname), 将检索到的满足条件的同学新增到该表中</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> St (S<span class="comment">#, Sname)</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Sname From Student</span></span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">like</span> ‘%伟 ’ ;</span><br></pre></td></tr></table></figure><p><strong>示例：新建Table: SCt(S#, C#, Score), 将检索到的成绩及格同学的记录新增到该表中</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SCt (S<span class="comment">#, C#, Score)</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment">#, C#, Score From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score&gt;=<span class="number">60</span> ;</span><br></pre></td></tr></table></figure><p><strong>示例：追加成绩优秀同学的记录</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SCt (S<span class="comment">#, C#, Score)</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment">#, C#, Score From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score&gt;=<span class="number">90</span> ;</span><br></pre></td></tr></table></figure><p><strong>注意：当新增元组时，DBMS会检查用户定义的完整性约束条件等，如不符合完整性约束条件，则将不会执行新增动作（将在后面介绍）。</strong></p><p>还可以有更复杂的“查询后插入到新表中”的语句，例如可以将中间结果存储成表—这很有用！</p><p><strong>示例：新建Table: St(S#, Sname, avgScore), 将检索到的同学的平均成绩新增到该表中</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> St (S<span class="comment">#, Sname, avgScore)</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Sname, Avg(Score) From Student, SC</span></span><br><span class="line"><span class="keyword">Where</span> Student.S<span class="comment"># = SC.S#</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> Student.S<span class="comment"># ;</span></span><br></pre></td></tr></table></figure><p>此SELECT语句的书写语法后面再解释。</p><h4 id="2-SQL-之Delete"><a href="#2-SQL-之Delete" class="headerlink" title="(2)SQL-之Delete"></a>(2)SQL-之Delete</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326101200.png" alt></p><p><font size="4" color="red"><strong>注意：当删除元组时，DBMS会检查用户定义的完整性约束条件等，如不符合完整性约束条件，则将不会执行删除动作</strong></font></p><p><strong>如果Where条件省略，则删除所有的元组。</strong></p><p><strong>示例：删除SC表中所有元组</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> SC ;</span><br></pre></td></tr></table></figure><p><strong>示例：删除98030101号同学所选的所有课程</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> SC <span class="keyword">Where</span> S<span class="comment"># = ‘98030101’ ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：删除自动控制系的所有同学</strong>(此是一简单的嵌套子查询，后面会有更详细解释。)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> Student <span class="keyword">Where</span> D<span class="comment"># in</span></span><br><span class="line">( <span class="keyword">Select</span> D<span class="comment"># From Dept Where Dname = ‘自动控制’);</span></span><br></pre></td></tr></table></figure><p><strong>示例：删除有四门不及格课程的所有同学</strong>(此SELECT语句的书写语法后面再解释)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> Student <span class="keyword">Where</span> S<span class="comment"># in</span></span><br><span class="line">( <span class="keyword">Select</span> S<span class="comment"># From SC Where Score &lt; 60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment"># Having Count(*)&gt;= 4 );</span></span><br></pre></td></tr></table></figure><h4 id="3-SQL-之Update"><a href="#3-SQL-之Update" class="headerlink" title="(3)SQL-之Update"></a>(3)SQL-之Update</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326101528.png" alt></p><p><strong>如果Where条件省略，则更新所有的元组</strong></p><p><strong>示例：将所有教师工资上调5%</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> Teacher</span><br><span class="line"><span class="keyword">Set</span> Salary = Salary * <span class="number">1.05</span> ;</span><br></pre></td></tr></table></figure><p><strong>示例：将所有计算机系的教师工资上调10%</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> Teacher</span><br><span class="line"><span class="keyword">Set</span> Salary = Salary * <span class="number">1.1</span></span><br><span class="line"><span class="keyword">Where</span> D<span class="comment"># in</span></span><br><span class="line">( <span class="keyword">Select</span> D<span class="comment"># From Dept Where Dname = ‘计算机’)</span></span><br></pre></td></tr></table></figure><p><strong>示例：当某同学001号课的成绩低于该课程平均成绩时，将该同学该门课成绩提高5%</strong>(此SELECT语句的书写语法后面再解释。)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> SC</span><br><span class="line"><span class="keyword">Set</span> Score = Score * <span class="number">1.05</span></span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = ‘001’ and Score &lt; some</span></span><br><span class="line">( <span class="keyword">Select</span> <span class="keyword">AVG</span>(Score) <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = ‘001’ ) ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：将张三同学001号课的成绩置为其班级该门课的平均成绩</strong>(此SELECT语句的书写语法后面再解释。)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Update</span> SC</span><br><span class="line"><span class="keyword">Set</span> Score = ( <span class="keyword">Select</span> <span class="keyword">AVG</span>(SC2.Score)</span><br><span class="line"><span class="keyword">From</span> SC SC1, Student S1, SC SC2, Student S2</span><br><span class="line"><span class="keyword">Where</span> S1.Sclass = S2.Sclass <span class="keyword">and</span> SC1.S<span class="comment"># = S1.S#</span></span><br><span class="line"><span class="keyword">and</span> SC2.S<span class="comment"># = S2.S# and S1.Sname=‘张三’</span></span><br><span class="line"><span class="keyword">and</span> SC1.C<span class="comment"># = ‘001’ and SC1.C# = SC2.C# )</span></span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = ‘001’ and S# in ( Select S# From Student</span></span><br><span class="line"><span class="keyword">Where</span> Sname = ‘张三’ ) ;</span><br></pre></td></tr></table></figure><h3 id="6、利用SQL语言修改与撤销数据库"><a href="#6、利用SQL语言修改与撤销数据库" class="headerlink" title="6、利用SQL语言修改与撤销数据库"></a>6、利用SQL语言修改与撤销数据库</h3><h4 id="1-修改数据库"><a href="#1-修改数据库" class="headerlink" title="(1)修改数据库"></a>(1)修改数据库</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104017.png" alt></p><ul><li><strong>alter：改变</strong></li><li><strong>drop：删除</strong></li><li><strong>modify：修改</strong></li><li><strong>add：添加</strong></li></ul><p><strong>示例：在学生表Student(S#,Sname,Ssex,Sage,D#,Sclass)基础上增加二列Saddr, PID</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student <span class="keyword">Add</span> Saddr <span class="built_in">char</span>[<span class="number">40</span>], PID <span class="built_in">char</span>[<span class="number">18</span>] ;</span><br></pre></td></tr></table></figure><p><strong>示例：将上例表中Sname列的数据类型增加两个字符</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student <span class="keyword">Modify</span> Sname <span class="built_in">char</span>(<span class="number">10</span>) ;</span><br></pre></td></tr></table></figure><p><strong>示例：删除学生姓名必须取唯一值的约束</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Student <span class="keyword">Drop</span> <span class="keyword">Unique</span>( Sname );</span><br></pre></td></tr></table></figure><h4 id="2-撤销"><a href="#2-撤销" class="headerlink" title="(2)撤销"></a>(2)撤销</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104212.png" alt></p><p><strong>示例：撤消学生表Student</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Drop</span> <span class="keyword">Table</span> Student;</span><br></pre></td></tr></table></figure><p><strong>示例：撤消教师表Teacher</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Drop</span> <span class="keyword">Table</span> Teacher;</span><br></pre></td></tr></table></figure><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200326104350.png" alt></p><p><strong>示例：撤消SCT数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Drop</span> <span class="keyword">database</span> SCT;</span><br></pre></td></tr></table></figure><p><strong>注意，SQL-delete语句只是删除表中的元组,而撤消基本表droptable的操作是撤消包含表格式、表中所有元组、由该表导出的视图等相关的所有内容，所以使用要特别注意。</strong></p><h4 id="3-数据库指定与关闭命令"><a href="#3-数据库指定与关闭命令" class="headerlink" title="(3)数据库指定与关闭命令"></a>(3)数据库指定与关闭命令</h4><p><strong>有些DBMS提供了操作多个数据库的能力</strong>，此时在进行数据库操作时需要指定待操作数据库与关闭数据库的功能。</p><p><strong>指定当前数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> 数据库名;</span><br></pre></td></tr></table></figure><p><strong>关闭当前数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close 数据库名;</span><br></pre></td></tr></table></figure><h2 id="二、SQL语言之复杂查询与视图"><a href="#二、SQL语言之复杂查询与视图" class="headerlink" title="二、SQL语言之复杂查询与视图"></a>二、SQL语言之复杂查询与视图</h2><hr><h3 id="1、子查询"><a href="#1、子查询" class="headerlink" title="1、子查询"></a>1、子查询</h3><p><strong>为什么需要子查询？</strong></p><p>答:现实中，很多情况需要进行下述条件的判断</p><ul><li><strong>集合成员资格</strong><ul><li>某一元素是否是某一个集合的成员</li></ul></li><li><strong>集合之间的比较</strong><ul><li>某一个集合是否包含另一个集合等</li></ul></li><li><strong>集合基数的测试</strong><ul><li>测试集合是否为空</li><li>测试集合是否存在重复元组</li></ul></li></ul><p><strong>子查询：出现在Where子句中的Select语句被称为子查询(subquery)</strong> , 子查询返回了一个集合，可以通过与这个集合的比较来确定另一个查询集合。</p><p><strong>种类：IN、NOT IN子查询、SOME、OR子查询、Exists子查询</strong></p><h4 id="1-IN、NOT-IN子查询"><a href="#1-IN、NOT-IN子查询" class="headerlink" title="(1)IN、NOT IN子查询"></a>(1)IN、NOT IN子查询</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402135031.png" alt></p><p><strong>示例：列出张三、王三同学的所有信息</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> * <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname <span class="keyword">in</span> (“张三”, “王三”);</span><br></pre></td></tr></table></figure><p><strong>它相当于：</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> * <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sname = “张三” <span class="keyword">or</span> Sname = “王三”;</span><br></pre></td></tr></table></figure><p><strong>示例：列出选修了001号课程的学生的学号和姓名</strong>(该方法，是不连接表的方法)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Sname From Student</span></span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># in ( Select S# From SC Where C# = ‘001’ ) ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：求既学过001号课程, 又学过002号课程的学生的学号</strong>(该方法，是不连接表的方法)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = ‘001’ and</span></span><br><span class="line">S<span class="comment"># in ( Select S# From SC Where C# = ‘002’ ) ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：列出没学过李明老师讲授课程的所有同学的姓名?</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># not in ( Select S# From SC, Course C, Teacher T</span></span><br><span class="line"><span class="keyword">Where</span> T.Tname = ‘李明’ <span class="keyword">and</span> SC.C<span class="comment"># = C.C#and T.T# = C.T# );</span></span><br></pre></td></tr></table></figure><p><font size="4" color="red"><strong>非相关子查询：内层查询独立进行，没有涉及任何外层查询相关<br>信息的子查询</strong></font></p><p><font size="4" color="red"><strong>相关子查询：内层查询需要依靠外层查询的某些参量作为限定条件<br>才能进行的子查询</strong></font></p><ul><li><strong>之前的举例都是非相关子查询。</strong></li><li><strong>外层向内层传递的参量需要使用外层的表名或表别名来限定</strong></li><li><strong>相关子查询只能由外层向内层传递参数，而不能反之；这也称为变量的作用域原则。</strong></li></ul><p><strong>示例：求学过001号课程的同学的姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname</span><br><span class="line"><span class="keyword">From</span> Student Stud</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># in ( Select S#</span></span><br><span class="line"><span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># = Stud.S# and C# = ‘001’ ) ;</span></span><br></pre></td></tr></table></figure><h4 id="2-θ-SOME、θ-OR子查询"><a href="#2-θ-SOME、θ-OR子查询" class="headerlink" title="(2)θ-SOME、θ-OR子查询"></a>(2)θ-SOME、θ-OR子查询</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402142446.png" alt></p><ul><li><p><strong>语法中， θ是比较运算符： &lt; , &gt; , &gt;= , &lt;= , = , &lt;&gt;。</strong></p></li><li><p><strong>语义：将表达式的值与子查询的结果进行比较：</strong></p><ul><li>如果表达式的值至少与子查询结果的某一个值相比较满足θ 关系，则“表达式 θ some (子查询)”的结果便为真；</li><li>如果表达式的值与子查询结果的所有值相比较都满足θ 关系，则“表达式 θ all (子查询)”的结果便为真；</li></ul></li><li><p>在SQL标准中，也有θ-any谓词，但由于其语义的模糊性：any,“任一”是指所有呢？还是指某一个？不清楚，所以被 θ-some替代以求更明晰</p></li><li><p><font size="4" color="red"><strong>表达式 = some (子查询）等价于 表达式 in (子查询)</strong></font></p></li><li><p><font size="4" color="red">*<em>表达式 &lt;&gt; all (子查询)等价于 表达式 not in (子查询) *</em></font></p><p><strong>示例：找出工资最低的教师姓名</strong></p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Tname <span class="keyword">From</span> Teacher</span><br><span class="line"><span class="keyword">Where</span> Salary &lt;= <span class="keyword">all</span> ( <span class="keyword">Select</span> Salary <span class="keyword">From</span> Teacher );</span><br></pre></td></tr></table></figure><p><strong>示例：找出001号课成绩不是最高的所有学生的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = “001” and</span></span><br><span class="line">Score &lt; <span class="keyword">some</span> ( <span class="keyword">Select</span> Score <span class="keyword">From</span> SC <span class="keyword">Where</span> C<span class="comment"># = “001” );</span></span><br></pre></td></tr></table></figure><p><strong>示例：找出所有课程都不及格的学生姓名(相关子查询)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="number">60</span> &gt; <span class="keyword">all</span> ( <span class="keyword">Select</span> Score <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># = Student.S# );</span></span><br></pre></td></tr></table></figure><p><strong>示例：找出001号课成绩最高的所有学生的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = “001” and</span></span><br><span class="line">Score &gt;= <span class="keyword">all</span> ( <span class="keyword">Select</span> Score <span class="keyword">From</span> SC <span class="keyword">Where</span> C<span class="comment"># = “001” );</span></span><br></pre></td></tr></table></figure><p><strong>示例：找出98030101号同学成绩最低的课程号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># = “98030101” and</span></span><br><span class="line">Score &lt;= <span class="keyword">all</span> ( <span class="keyword">Select</span> Score <span class="keyword">From</span> SC <span class="keyword">Where</span> S<span class="comment"># = “98030101” );</span></span><br></pre></td></tr></table></figure><p><strong>示例：找出张三同学成绩最低的课程号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C<span class="comment"># From SC, Student S</span></span><br><span class="line"><span class="keyword">Where</span> Sname = “张三” <span class="keyword">and</span> S.S<span class="comment">#=SC.S# and</span></span><br><span class="line">Score &lt;= <span class="keyword">all</span> ( <span class="keyword">Select</span> Score <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment">#=S.S# );</span></span><br></pre></td></tr></table></figure><h4 id="3-【Not】Exists子查询（量词∃）"><a href="#3-【Not】Exists子查询（量词∃）" class="headerlink" title="(3)【Not】Exists子查询（量词∃）"></a>(3)【Not】Exists子查询（量词∃）</h4><p><strong>Exists就是量词∃</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402144738.png" alt></p><p><strong>语义：子查询结果中有无元组存在</strong></p><ul><li><p><strong>不加not形式的Exists谓词可以不用,和直接查询等效，我们一般使用的是 not exists</strong></p></li><li><p><strong>该语法可以理解为：将主查询的数据，放到子查询中做条件验证，根据验证结果（TRUE 或 FALSE）来决定主查询的数据结果是否得以保留。而EXISTS符合为真，NOT EXISTS是不符合为真，<a href="https://blog.csdn.net/qsyzb/article/details/12523051" target="_blank" rel="noopener">详细解释</a></strong></p></li><li><p><strong>由于其特性,只返回True或者False来决定。所以，一般需要将外表和内表关联起来，否则只是根据内标是否返回而判断</strong></p></li><li><p><font size="4" color="red"><strong>not exists很难理解，需要将肯定变成否定之否定，需要多多练习</strong></font></p></li></ul><p><strong>示例：检索学过001号教师主讲的所有课程的所有同学的姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> //不存在</span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> Course //有一门<span class="number">001</span>教师主讲课程</span><br><span class="line"><span class="keyword">Where</span> Course.T<span class="comment"># = ‘001’ and not exists //该同学没学过</span></span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># = Student.S# and C# = Course.C# ) );</span></span><br></pre></td></tr></table></figure><blockquote><p>过程:首先从Student表中第一元组开始代入，查询Where语句，not exists（子查询）为真时即子查询无返回结果时保留该元组，进入中间层判断，选择Course表第一个元组开始代入，进入Where语句，当Course.T# = ‘001’和not exists（子查询）都为真即Course.T# = ‘001’并且子查询无返回结果时为真，该中间层元组进入结果表，进入内层判断，取SC表第一个元组代入，进入Where语句，只有满足 S# = Student.S# and C# = Course.C#才为真具有返回结果。</p><p>而内层为真，则中间层的not exists为假，并且，对SC表遍历只要有一个为真，则就有返回结果，则中间层的not exists就为假了，则本次中间层无返回结果，course继续下一个元组代入，同理进行检测后，只有所有元组检测完毕都没有返回结果才能判断外层的not exists为真，这样才能保留该元组，并且选择Sname。</p><p>也就是说，三层循环嵌套，最外层只是选择层，中间和内两层循环为判断是否选择，中间层全部为假则选择该元组，而保证中间层为假，则必须保证Course.T# = ‘001’和not exists不能同时为真。</p></blockquote><p><strong>示例：列出没学过李明老师讲授任何一门课程的所有同学的姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> //不存在</span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> Course, SC, Teacher //学过一门课程</span><br><span class="line"><span class="keyword">Where</span> Tname=‘李明’ <span class="keyword">and</span> Course.T<span class="comment"># =Teacher.T#</span></span><br><span class="line"><span class="keyword">and</span> Course.C<span class="comment"># = SC.C# and S# = Student.S# );</span></span><br></pre></td></tr></table></figure><p><strong>示例：列出至少学过98030101号同学学过所有课程的同学的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> DISTINC S<span class="comment"># From SC SC1</span></span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> //不存在</span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> SC SC2 //有一门课程</span><br><span class="line"><span class="keyword">Where</span> SC2.S<span class="comment"># = ‘98030101’ and not exists //该同学没学过</span></span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = SC2.C# and S# = SC1.S# ) );</span></span><br></pre></td></tr></table></figure><p><strong>关系代数和元组演算的表达:</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402161148.png" alt></p><h4 id="4-BETWEEN"><a href="#4-BETWEEN" class="headerlink" title="(4)BETWEEN"></a>(4)BETWEEN</h4><p>BETWEEN 运算符用于 WHERE 表达式中，选取介于两个值之间的数据范围。BETWEEN 同 AND 一起搭配使用，语法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WHERE column BETWEEN value1 AND value2</span><br><span class="line">WHERE column NOT BETWEEN value1 AND value2</span><br></pre></td></tr></table></figure><h3 id="2、结果计算与聚集计算"><a href="#2、结果计算与聚集计算" class="headerlink" title="2、结果计算与聚集计算"></a>2、结果计算与聚集计算</h3><h4 id="1-结果计算"><a href="#1-结果计算" class="headerlink" title="(1)结果计算"></a>(1)结果计算</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402164532.png" alt></p><ul><li>Select-From-Where语句中，<strong>Select子句后面</strong>不仅可是列名，而<strong>且可是一些计算表达式或聚集函数</strong>，表明在投影的同时直接进行一些运算</li><li><strong>expr可以是常量、列名、或由常量、列名、特殊函数及算术运算符构成的算术运算式。</strong>特殊函数的使用需结合各自DBMS的说明书</li><li><strong>agfunc()是一些聚集函数</strong></li></ul><p><strong>示例：求有差额(差额&gt;0)的任意两位教师的薪水差额</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> T1.Tname <span class="keyword">as</span> TR1, T2.Tname <span class="keyword">as</span> TR2, T1.Salary – T2.Salary</span><br><span class="line"><span class="keyword">From</span> Teacher T1, Teacher T2</span><br><span class="line"><span class="keyword">Where</span> T1.Salary &gt; T2.Salary;</span><br></pre></td></tr></table></figure><p><strong>示例：依据学生年龄求学生的出生年份，当前是2015年</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S.S<span class="comment">#, S.Sname, 2015 – S.Sage+1 as Syear</span></span><br><span class="line"><span class="keyword">From</span> Student S;</span><br></pre></td></tr></table></figure><h4 id="2-聚集计算"><a href="#2-聚集计算" class="headerlink" title="(2)聚集计算"></a>(2)聚集计算</h4><p><strong>常用内置聚集函数：</strong></p><ul><li><strong>COUNT([ALL|DISTINCT] [列名])</strong>：求个数</li><li><strong>SUM([ALL|DISTINCT] [列名])</strong>：求 和</li><li><strong>AVG([ALL|DISTINCT] [列名])</strong>：求平均</li><li><strong>MAX([ALL|DISTINCT] [列名])</strong>：求最大</li><li><strong>MIN([ALL|DISTINCT] [列名])</strong>：求最小</li></ul><p><strong>聚集函数是不允许用于Where子句中的：Where子句是对每一元组进行条件过滤，而不是对集合进行条件过滤</strong></p><p><strong>示例：求教师的工资总额</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">Sum</span>(Salary) <span class="keyword">From</span> Teacher;</span><br></pre></td></tr></table></figure><p><strong>示例：求计算机系教师的工资总额</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">Sum</span>(Salary) <span class="keyword">From</span> Teacher T, Dept</span><br><span class="line"><span class="keyword">Where</span> Dept.Dname = ‘计算机’ <span class="keyword">and</span> Dept.D<span class="comment"># = T.D#;</span></span><br></pre></td></tr></table></figure><p><strong>示例：求数据库课程的平均成绩</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">AVG</span>(Score) <span class="keyword">From</span> Course C, SC</span><br><span class="line"><span class="keyword">Where</span> C.Cname = ‘数据库’ <span class="keyword">and</span> C.C<span class="comment"># = SC.C#;</span></span><br></pre></td></tr></table></figure><h3 id="3、分组查询与分组过滤"><a href="#3、分组查询与分组过滤" class="headerlink" title="3、分组查询与分组过滤"></a>3、分组查询与分组过滤</h3><h4 id="1-分组查询"><a href="#1-分组查询" class="headerlink" title="(1)分组查询"></a>(1)分组查询</h4><p>分组：SQL可以将<strong>检索到的元组</strong>按照某一条件进行分类，具有相同条件值的元组划到一个组或一个集合中，<strong>同时处理多个组或集合的聚集运算。</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402165133.png" alt></p><p><strong>示例： 求每一个学生的平均成绩</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, AVG(Score) From SC</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment">#;</span></span><br></pre></td></tr></table></figure><p><strong>示例：求每一门课程的平均成绩</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C<span class="comment">#, AVG(Score) From SC</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> C<span class="comment">#</span></span><br></pre></td></tr></table></figure><h4 id="2-分组过滤"><a href="#2-分组过滤" class="headerlink" title="(2)分组过滤"></a>(2)分组过滤</h4><p>分组过滤：若要<strong>对集合(即分组)进行条件过滤，即满足条件的集合/分组留下，不满足条件的集合/分组剔除。</strong></p><p>Having子句，又称分组过滤子句。需要有Groupby子句支持，换句话说，<strong>没有Groupby子句，便不能有Having子句。</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402165421.png" alt></p><p><strong>示例：求不及格课程超过两门的同学的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment"># Having Count(*)&gt;2;</span></span><br></pre></td></tr></table></figure><p><strong>示例：求不及格课程超过两门的同学的学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> C<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> C<span class="comment"># Having Count(*)&gt;10;</span></span><br></pre></td></tr></table></figure><p><font size="4" color="red"><strong>分组查询仍需要注意语义问题</strong></font></p><p><strong>示例：求有两门以上不及格课程同学的学号及其平均成绩</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Avg(Score) From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment"># Having Count(*)&gt;2;</span></span><br></pre></td></tr></table></figure><p><font size="4" color="red"><strong>这样写是错误的，求出的是“该同学那几门不及格课程的平均成绩”，而不是<br>“该同学所有课程的平均成绩”</strong></font></p><p><strong>正确写法:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment">#, Avg(Score) From SC</span></span><br><span class="line"><span class="keyword">Where</span> S<span class="comment"># in</span></span><br><span class="line">( <span class="keyword">Select</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">Where</span> Score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment"># Having Count(*)&gt;2 )</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S<span class="comment"># ;</span></span><br></pre></td></tr></table></figure><h3 id="4、实现关系代数操作"><a href="#4、实现关系代数操作" class="headerlink" title="4、实现关系代数操作"></a>4、实现关系代数操作</h3><ul><li>SQL语言：并运算 UNION, 交运算INTERSECT, 差运算EXCEPT。</li><li><strong>通常情况下自动删除重复元组：不带ALL。若要保留重复的元组，则要带ALL.</strong></li><li>假设子查询1的一个元组出现m次，子查询2的一个元组出现n次，则该元组在：<ul><li>子查询1 Union ALL 子查询2 ，出现m + n次</li><li>子查询1 Intersect ALL 子查询2 ，出现min(m,n)次</li><li>子查询1 Except ALL 子查询2 ，出现max(0, m – n)次</li></ul></li><li>UNION运算符是Entry-SQL92的一部分、INTERSECT、EXCEPT运算符是Full-SQL92的一部分。<strong>它们都是Core-SQL99的一部分，但有些DBMS并不支持这些运算，使用时要注意！</strong></li></ul><p><strong>1、并运算 UNION</strong></p><p><strong>示例：求学过002号课的同学或学过003号课的同学学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘003’;</span></span><br></pre></td></tr></table></figure><p>它等同于</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’ OR C# = ‘003’;</span></span><br></pre></td></tr></table></figure><p><strong>但有时UNION不能转换掉</strong></p><p><strong>示例：已知两个表Customers(CID, Cname, City, Discnt)、Agents(AID, Aname, City, Percent)</strong></p><p><strong>求客户所在的或者代理商所在的城市</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> City <span class="keyword">From</span> Customers</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">Select</span> City <span class="keyword">From</span> Agents ;</span><br></pre></td></tr></table></figure><p><strong>2、交运算INTERSECT</strong></p><p><strong>示例：求既学过002号课，又学过003号课的同学学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’</span></span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘003’;</span></span><br></pre></td></tr></table></figure><p>它等同于</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’ and S# IN</span></span><br><span class="line">(<span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘003’);</span></span><br></pre></td></tr></table></figure><p>交运算符Intersect并没有增强SQL的表达能力，没有Intersect， SQL也可以用其他方式表达同样的查询需求。只是有了Intersect更容易表达一些，但增加了SQL语言的不唯一性。</p><p><strong>3、差运算EXCEPT</strong></p><p><strong>示例： 假定所有学生都有选课，求没学过002号课程的学生学号</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">DISTINCT</span> S<span class="comment"># From SC</span></span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">Select</span> S<span class="comment"># From SC Where C# = ‘002’;</span></span><br></pre></td></tr></table></figure><p>它等同于</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="keyword">DISTINCT</span> S<span class="comment"># From SC SC1</span></span><br><span class="line"><span class="keyword">Where</span> <span class="keyword">not</span> <span class="keyword">exists</span> ( <span class="keyword">Select</span> * <span class="keyword">From</span> SC</span><br><span class="line"><span class="keyword">Where</span> C<span class="comment"># = ‘002’ and S# = SC1.S#);</span></span><br></pre></td></tr></table></figure><p>差运算符Except也没有增强SQL的表达能力，没有Except， SQL也可以用其他方式表达同样的查询需求。只是有了Except更容易表达一些，但增加了SQL语言的不唯一性。</p><h3 id="5、空值的处理"><a href="#5、空值的处理" class="headerlink" title="5、空值的处理"></a>5、空值的处理</h3><p><strong>在SQL标准中和许多现流行的DBMS中，空值被用一种特殊的符号Null来标记，使用特殊的空值检测函数来获得某列的值是否为空值。</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402174310.png" alt></p><p><strong>示例：找出年龄值为空的学生姓名</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> Sage <span class="keyword">is</span> <span class="literal">null</span> ;</span><br></pre></td></tr></table></figure><p><strong>注意：上例条件不能写为Where Sage = null; 空值是不能进行运算的</strong></p><p><strong>现行DBMS的空值处理小结</strong></p><ul><li><strong>除is[not]null之外，空值不满足任何查找条件</strong></li><li><strong>如果null参与算术运算，则该算术表达式的值为null</strong></li><li><strong>如果null参与比较运算，则结果可视为false。在SQL-92中可看成unknown</strong></li><li><strong>如果null参与聚集运算，则除count(*)之外其它聚集函数都忽略null</strong></li></ul><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402174414.png" alt></p><h3 id="6、内连接、外连接"><a href="#6、内连接、外连接" class="headerlink" title="6、内连接、外连接"></a>6、内连接、外连接</h3><blockquote><p><a href="https://www.cnblogs.com/pcjim/articles/799302.html" target="_blank" rel="noopener">https://www.cnblogs.com/pcjim/articles/799302.html</a></p></blockquote><p><strong>连接类型：</strong></p><ul><li><strong>inner [outer] join：即关系代数中的θ-连接运算</strong></li><li><strong>left [outer] join：左外连接</strong></li><li><strong>right [outer] join：右外连接</strong></li><li><strong>full [outer] join：全外连接</strong></li></ul><p><strong>连接条件:</strong></p><ul><li><p><strong>natural：出现在结果关系中的两个连接关系的元组在公共属性上取值相等，且公共属性只出现一次</strong></p></li><li><p><strong>on 连接条件：出现在结果关系中的两个连接关系的元组取值满足连接条件，且公共属性出现两次</strong></p></li><li><p><strong>using (Col1, Col2, …, Coln)：(Col1, Col2, …, Coln)是两个连接关系的公共属性的<u><em>子集</em></u>，元组在(Col1, Col2, …, Coln)上取值相等，且(Col1, Col2, …, Coln)只出现一次</strong><font size="4" color="red"><strong>其实就是natural的部分，natural是全部公共属性，而这个是其公共属性的子集</strong></font></p></li></ul><p><strong>示例: 求所有教师的任课情况并按教师号排序(没有任课的教师也需列在表中)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Teacher.T<span class="comment">#, Tname, Cname</span></span><br><span class="line"><span class="keyword">From</span> Teacher <span class="keyword">Inner</span> <span class="keyword">Join</span> Course</span><br><span class="line"><span class="keyword">ON</span> Teacher.T<span class="comment"># = Course.T#</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">by</span> Teacher.T<span class="comment"># ASC;</span></span><br></pre></td></tr></table></figure><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402175358.png" alt></p><p><strong>示例: 求所有教师的任课情况(没有任课的教师也需列在表中)</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Teacher. T<span class="comment">#, Tname, Cname</span></span><br><span class="line"><span class="keyword">From</span> Teacher <span class="keyword">Left</span> <span class="keyword">Outer</span> <span class="keyword">Join</span> Course</span><br><span class="line"><span class="keyword">ON</span> Teacher.T<span class="comment"># = Course.T#</span></span><br><span class="line"><span class="keyword">Order</span> <span class="keyword">by</span> Teacher.T<span class="comment"># ASC ;</span></span><br></pre></td></tr></table></figure><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402175433.png" alt></p><h3 id="7、视图及其应用"><a href="#7、视图及其应用" class="headerlink" title="7、视图及其应用"></a>7、视图及其应用</h3><p><strong>对应概念模式的数据在SQL中被称为基本表(Table),而对应外模式的数据称为视图(View)。视图不仅包含外模式，而且包含其E-C映像。</strong></p><ul><li><strong>基本表是实际存储于存储文件中的表，基本表中的数据是需要存储的</strong></li><li><strong>视图在SQL中只存储其由基本表导出视图所需要的公式，即由基本表产生视图的映像信息，其数据并不存储，而是在运行过程中动态产生与维护的</strong></li><li><strong>对视图数据的更改最终要反映在对基本表的更改上。</strong></li></ul><h4 id="1-定义视图"><a href="#1-定义视图" class="headerlink" title="(1)定义视图"></a>(1)定义视图</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402183021.png" alt></p><p><strong>如果视图的属性名缺省，则默认为子查询结果中的属性名；也可以显式指明其所拥有的列名。</strong></p><p><strong>with checkoption指明当对视图进行insert，update，delete时，要检查进行insert/update/delete的元组是否满足视图定义中子查询中定义的条件表达式</strong></p><p><strong>示例：定义一个视图 CompStud 为计算机系的学生，通过该视图可以将Student表中其他系的学生屏蔽掉</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Student表中其他系的学生屏蔽掉</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">View</span> CompStud <span class="keyword">AS</span></span><br><span class="line">( <span class="keyword">Select</span> * <span class="keyword">From</span> Student</span><br><span class="line"><span class="keyword">Where</span> D<span class="comment"># in ( Select D# From Dept</span></span><br><span class="line"><span class="keyword">Where</span> Dname = ‘计算机’ ) );</span><br></pre></td></tr></table></figure><p><strong>示例：定义一个视图Teach为教师任课的情况，把Teacher表中的个人隐私方面的信息，如工资等屏蔽掉，仅反映其教哪门课及其学分等。</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">View</span> Teach <span class="keyword">AS</span></span><br><span class="line">( <span class="keyword">Select</span> T.Tname, C.Cname, Credit</span><br><span class="line"><span class="keyword">From</span> Teacher T, Course C</span><br><span class="line"><span class="keyword">Where</span> T.T<span class="comment"># = C.T# ) ;</span></span><br></pre></td></tr></table></figure><h4 id="2-使用视图"><a href="#2-使用视图" class="headerlink" title="(2)使用视图"></a>(2)使用视图</h4><p><strong>使用视图：定义好的视图，可以像Table一样，在SQL各种语句中使用</strong></p><p><strong>示例：检索主讲数据库课程的教师姓名，我们可使用Teach</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> T.Tname <span class="keyword">From</span> Teach T</span><br><span class="line"><span class="keyword">Where</span> T.Cname = ‘数据库’ ;</span><br></pre></td></tr></table></figure><p><strong>视图究竟有什么作用?</strong></p><p><strong>答：定义视图，有时可方便用户进行检索操作。</strong></p><p><strong>示例：定义视图StudStat, 描述学生的平均成绩、最高成绩，最低成绩等</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">View</span> StudStat(S<span class="comment">#, Sname, AvgS, MinS, MaxS, CNT)</span></span><br><span class="line"><span class="keyword">as</span> ( <span class="keyword">Select</span> S<span class="comment">#, Sname, AVG(Score), MIN(Score), Max(Score), Count(*)</span></span><br><span class="line"><span class="keyword">From</span> Student S, SC <span class="keyword">Where</span> S.S<span class="comment"># = SC.S#</span></span><br><span class="line"><span class="keyword">Group</span> <span class="keyword">by</span> S.S<span class="comment"># ) ;</span></span><br></pre></td></tr></table></figure><p><strong>示例：基于视图StudStat检索某一学生平均成绩</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> Sname, AvgS <span class="keyword">From</span> StudStat <span class="keyword">Where</span> Sname = ‘张三’ ;</span><br></pre></td></tr></table></figure><h4 id="3-更新视图"><a href="#3-更新视图" class="headerlink" title="(3)更新视图"></a>(3)更新视图</h4><p><strong>SQL视图更新：是比较复杂的问题，因视图不保存数据，对视图的更新最终要反映到对基本表的更新上，而有时，视图定义的映射不是可逆的。</strong></p><p><strong>SQL视图更新的可执行性</strong></p><ul><li>如果视图的select目标列包含聚集函数，则不能更新</li><li>如果视图的select子句使用了unique或distinct，则不能更新</li><li>如果视图中包括了groupby子句，则不能更新</li><li>如果视图中包括经算术表达式计算出来的列，则不能更新</li><li>如果视图是由单个表的列构成，但并没有包括主键，则不能更新</li></ul><p>例如：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> ClassStud(Sname, Sclass)</span><br><span class="line"><span class="keyword">as</span> ( <span class="keyword">select</span> Sname, Sclass</span><br><span class="line"><span class="keyword">from</span> Student );</span><br><span class="line"></span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ClassStud</span><br><span class="line"><span class="keyword">Values</span> ( ‘张三’, ‘<span class="number">980301</span>’ );</span><br></pre></td></tr></table></figure><p>无法更新，缺失主键。</p><h4 id="4-撤销视图"><a href="#4-撤销视图" class="headerlink" title="(4)撤销视图"></a>(4)撤销视图</h4><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20200402183518.png" alt></p><p><strong>示例：撤消视图Teach</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Drop</span> <span class="keyword">View</span> Teach;</span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#555;font-size:14px">-----------------------本文结束 <i class="fa fa-heart"></i> 感谢阅读-----------------------</div></div></div><div><div id="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！恰饭^.^~</div><button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214611.png" alt="峻源 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214431.png" alt="峻源 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>峻源</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://lyxf2000.github.io/posts/128cc561/" title="数据库系统概论【三】">http://lyxf2000.github.io/posts/128cc561/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/数据库系统概论/" rel="tag"><i class="fa fa-tag">数据库系统概论</i></a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/925c12fd/" rel="next" title="计算机体系结构【二】"><i class="fa fa-chevron-left"></i> 计算机体系结构【二】</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/7b9a7785/" rel="prev" title="英语语法+词法【一】">英语语法+词法【一】 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NjM0NC8yMjg1NQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif" alt="峻源"></a><p class="site-author-name" itemprop="name">峻源</p><div class="site-description motion-element" itemprop="description">乐于心，乐与心，乐之屿，心扉间</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">122</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:1194320636@qq.com" title="QE-Mail &rarr; mailto:1194320636@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QE-Mail</a> </span><span class="links-of-author-item"><a href="https://music.163.com/#/playlist?id=699716432" title="CloudMusic &rarr; https://music.163.com/#/playlist?id=699716432" rel="noopener" target="_blank"><i class="fa fa-fw fa-music"></i>CloudMusic</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="https://www.baidu.com/" rel="noopener" target="_blank">百度</a></li><li class="links-of-blogroll-item"><a href="https://www.google.com/?hl=zh_CN" title="https://www.google.com/?hl=zh_CN" rel="noopener" target="_blank">谷歌</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/" title="https://www.zhihu.com/" rel="noopener" target="_blank">知乎</a></li><li class="links-of-blogroll-item"><a href="https://juejin.im/" title="https://juejin.im/" rel="noopener" target="_blank">掘金</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="https://github.com/" rel="noopener" target="_blank">github</a></li><li class="links-of-blogroll-item"><a href="https://www.luogu.org/" title="https://www.luogu.org/" rel="noopener" target="_blank">洛谷</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#导图"><span class="nav-number">1.</span> <span class="nav-text">导图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一、SQL语言概述"><span class="nav-number">2.</span> <span class="nav-text">一、SQL语言概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、SQL语言的功能概述"><span class="nav-number">2.1.</span> <span class="nav-text">1、SQL语言的功能概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、利用SQL语言建立数据库"><span class="nav-number">2.2.</span> <span class="nav-text">2、利用SQL语言建立数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-SQL-DDL"><span class="nav-number">2.2.1.</span> <span class="nav-text">(1)SQL-DDL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-创建数据库的语句—Create-Database"><span class="nav-number">2.2.2.</span> <span class="nav-text">(2)创建数据库的语句—Create Database</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-创建关系-表的语句—Create-Table"><span class="nav-number">2.2.3.</span> <span class="nav-text">(3)创建关系/表的语句—Create Table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-SQL-DML"><span class="nav-number">2.2.4.</span> <span class="nav-text">(4)SQL-DML</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-向表中追加元组的值-–Insert-Into"><span class="nav-number">2.2.5.</span> <span class="nav-text">(5)向表中追加元组的值 –Insert Into</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、利用SQL语言进行简单查询"><span class="nav-number">2.3.</span> <span class="nav-text">3、利用SQL语言进行简单查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-单表查询-Select-From-Where"><span class="nav-number">2.3.1.</span> <span class="nav-text">(1)单表查询-Select-From-Where</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-检索结果之去重复记录-Select-Distinct-From-Where"><span class="nav-number">2.3.2.</span> <span class="nav-text">(2)检索结果之去重复记录-Select Distinct-From-Where</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-检索结果之排序-Select-From-Where-Order-By"><span class="nav-number">2.3.3.</span> <span class="nav-text">(3)检索结果之排序-Select-From-Where-Order By</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-模糊查询-SELECT-FROM-WHERE-LIKE"><span class="nav-number">2.3.4.</span> <span class="nav-text">(4)模糊查询-SELECT-FROM-WHERE * LIKE *</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、利用SQL语言进行多表联合查询"><span class="nav-number">2.4.</span> <span class="nav-text">4、利用SQL语言进行多表联合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-表更名与表别名-重名处理"><span class="nav-number">2.4.1.</span> <span class="nav-text">(1)表更名与表别名(重名处理)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-等值连接"><span class="nav-number">2.4.2.</span> <span class="nav-text">(2)等值连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-不等值连接"><span class="nav-number">2.4.3.</span> <span class="nav-text">(2)不等值连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-多表联合查询训练"><span class="nav-number">2.4.4.</span> <span class="nav-text">(3)多表联合查询训练</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、利用SQL语言进行增-删-改"><span class="nav-number">2.5.</span> <span class="nav-text">5、利用SQL语言进行增-删-改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-SQL-之Insert"><span class="nav-number">2.5.1.</span> <span class="nav-text">(1)SQL-之Insert</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-SQL-之Delete"><span class="nav-number">2.5.2.</span> <span class="nav-text">(2)SQL-之Delete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-SQL-之Update"><span class="nav-number">2.5.3.</span> <span class="nav-text">(3)SQL-之Update</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、利用SQL语言修改与撤销数据库"><span class="nav-number">2.6.</span> <span class="nav-text">6、利用SQL语言修改与撤销数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-修改数据库"><span class="nav-number">2.6.1.</span> <span class="nav-text">(1)修改数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-撤销"><span class="nav-number">2.6.2.</span> <span class="nav-text">(2)撤销</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-数据库指定与关闭命令"><span class="nav-number">2.6.3.</span> <span class="nav-text">(3)数据库指定与关闭命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、SQL语言之复杂查询与视图"><span class="nav-number">3.</span> <span class="nav-text">二、SQL语言之复杂查询与视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、子查询"><span class="nav-number">3.1.</span> <span class="nav-text">1、子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-IN、NOT-IN子查询"><span class="nav-number">3.1.1.</span> <span class="nav-text">(1)IN、NOT IN子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-θ-SOME、θ-OR子查询"><span class="nav-number">3.1.2.</span> <span class="nav-text">(2)θ-SOME、θ-OR子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-【Not】Exists子查询（量词∃）"><span class="nav-number">3.1.3.</span> <span class="nav-text">(3)【Not】Exists子查询（量词∃）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-BETWEEN"><span class="nav-number">3.1.4.</span> <span class="nav-text">(4)BETWEEN</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、结果计算与聚集计算"><span class="nav-number">3.2.</span> <span class="nav-text">2、结果计算与聚集计算</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-结果计算"><span class="nav-number">3.2.1.</span> <span class="nav-text">(1)结果计算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-聚集计算"><span class="nav-number">3.2.2.</span> <span class="nav-text">(2)聚集计算</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、分组查询与分组过滤"><span class="nav-number">3.3.</span> <span class="nav-text">3、分组查询与分组过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-分组查询"><span class="nav-number">3.3.1.</span> <span class="nav-text">(1)分组查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-分组过滤"><span class="nav-number">3.3.2.</span> <span class="nav-text">(2)分组过滤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、实现关系代数操作"><span class="nav-number">3.4.</span> <span class="nav-text">4、实现关系代数操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、空值的处理"><span class="nav-number">3.5.</span> <span class="nav-text">5、空值的处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、内连接、外连接"><span class="nav-number">3.6.</span> <span class="nav-text">6、内连接、外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、视图及其应用"><span class="nav-number">3.7.</span> <span class="nav-text">7、视图及其应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-定义视图"><span class="nav-number">3.7.1.</span> <span class="nav-text">(1)定义视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-使用视图"><span class="nav-number">3.7.2.</span> <span class="nav-text">(2)使用视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-更新视图"><span class="nav-number">3.7.3.</span> <span class="nav-text">(3)更新视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-撤销视图"><span class="nav-number">3.7.4.</span> <span class="nav-text">(4)撤销视图</span></a></li></ol></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">峻源</span></div><span>本站已运行<span id="showDays"></span></span><script>var seconds=1e3,minutes=60*seconds,hours=60*minutes,days=24*hours,years=365*days,birthDay=Date.UTC(2019,8,1,14,0,0);setInterval(function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),h=Date.UTC(s,t,a,o,r,n),u=h-birthDay,d=Math.floor(u/years),y=Math.floor(u/days-365*d),i=Math.floor((u-(365*d+y)*days)/hours),l=Math.floor((u-(365*d+y)*days-i*hours)/minutes),M=Math.floor((u-(365*d+y)*days-i*hours-l*minutes)/seconds);document.getElementById("showDays").innerHTML=""+d+"年"+y+"天"+i+"小时"+l+"分钟"+M+"秒"},1e3)</script><div><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_uv">访问人数：<span id="busuanzi_value_site_uv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-eye"></i> <span id="busuanzi_container_site_pv">总访问量：<span id="busuanzi_value_site_pv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-pencil"></i> <span class="post-count">博客全站共 453.9k 字</span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/affix.js?v=7.2.0"></script><script src="/js/schemes/pisces.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script>window.livereOptions={refer:"posts/128cc561/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link rel="stylesheet" href="/dist/APlayer.min.css"><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><script type="text/javascript" src="/dist/music.js"></script><script type="text/javascript" src="/js/firework.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:220,height:400},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html><!-- rebuild by neat -->