<!-- build time:Tue Oct 12 2021 10:23:04 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2"><meta name="google-site-verification" content="4fXg7_br-6EcJkwb-a6Ci2NLdRf7aMleAsM1L9S1nBI"><link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/2.ico?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/1.ico?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!0,fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="七、文件管理1、文件管理功能文件管理的功能有：文件存储空间的管理：为每个文件分配必要的外存空间，提高外存的利用率，并能有助于提高文件系统的运行速度;目录管理: 为每个文件建立其目录项，并对众多的目录项加以有效组织，实现方便的按名存取，能实现文件共享，提供快速的目录查询手段。文件的读写管理和保护：文件的读写管理：根据用户请求，从外存中读取数据，或将数据写入外存。文件保护2、文件和文件系统(1)文件系"><meta name="keywords" content="操作系统"><meta property="og:type" content="article"><meta property="og:title" content="操作系统【十三】"><meta property="og:url" content="http://lyxf2000.github.io/posts/33c7448a/index.html"><meta property="og:site_name" content="乐屿心扉"><meta property="og:description" content="七、文件管理1、文件管理功能文件管理的功能有：文件存储空间的管理：为每个文件分配必要的外存空间，提高外存的利用率，并能有助于提高文件系统的运行速度;目录管理: 为每个文件建立其目录项，并对众多的目录项加以有效组织，实现方便的按名存取，能实现文件共享，提供快速的目录查询手段。文件的读写管理和保护：文件的读写管理：根据用户请求，从外存中读取数据，或将数据写入外存。文件保护2、文件和文件系统(1)文件系"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126101143.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126101812.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126102631.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126102812.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126103050.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126103958.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104408.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104840.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104958.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126105127.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126110522.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126114320.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126114351.png"><meta property="og:updated_time" content="2021-03-16T11:07:47.396Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="操作系统【十三】"><meta name="twitter:description" content="七、文件管理1、文件管理功能文件管理的功能有：文件存储空间的管理：为每个文件分配必要的外存空间，提高外存的利用率，并能有助于提高文件系统的运行速度;目录管理: 为每个文件建立其目录项，并对众多的目录项加以有效组织，实现方便的按名存取，能实现文件共享，提供快速的目录查询手段。文件的读写管理和保护：文件的读写管理：根据用户请求，从外存中读取数据，或将数据写入外存。文件保护2、文件和文件系统(1)文件系"><meta name="twitter:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126101143.png"><link rel="canonical" href="http://lyxf2000.github.io/posts/33c7448a/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>操作系统【十三】 | 乐屿心扉</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">乐屿心扉</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Keep Thinking</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-playlist"><a href="/playlist/" rel="section"><i class="menu-item-icon fa fa-fw fa-music"></i><br>歌单</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://lyxf2000.github.io/posts/33c7448a/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="峻源"><meta itemprop="description" content="乐于心，乐与心，乐之屿，心扉间"><meta itemprop="image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乐屿心扉"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">操作系统【十三】</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-11-26 09:54:57" itemprop="dateCreated datePublished" datetime="2020-11-26T09:54:57+08:00">2020-11-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-03-16 19:07:47" itemprop="dateModified" datetime="2021-03-16T19:07:47+08:00">2021-03-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/操作系统/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a></span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">字数统计:</span> <span class="post-count">7.8k(字)</span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">26(分)</span></span><br><p></p></div></header><div class="post-body" itemprop="articleBody"><h2 id="七、文件管理"><a href="#七、文件管理" class="headerlink" title="七、文件管理"></a>七、文件管理</h2><h3 id="1、文件管理功能"><a href="#1、文件管理功能" class="headerlink" title="1、文件管理功能"></a>1、文件管理功能</h3><p><strong>文件管理的功能有：</strong></p><ul><li><strong>文件存储空间的管理：</strong>为每个文件分配必要的外存空间，提高外存的利用率，并能有助于提高文件系统的运行速度;</li><li><strong>目录管理:</strong> 为每个文件建立其目录项，并对众多的目录项加以有效组织，实现方便的按名存取，能实现文件共享，提供快速的目录查询手段。</li><li><strong>文件的读写管理和保护：</strong><ul><li>文件的读写管理：根据用户请求，从外存中读取数据，或将数据写入外存。</li><li>文件保护</li></ul></li></ul><h3 id="2、文件和文件系统"><a href="#2、文件和文件系统" class="headerlink" title="2、文件和文件系统"></a>2、<strong>文件和文件系统</strong></h3><h4 id="1-文件系统"><a href="#1-文件系统" class="headerlink" title="(1)文件系统"></a>(1)文件系统</h4><p>==<strong>在操作系统中，文件系统的主要目的是“实现对文件的按名存取”</strong>==</p><p>现代OS几乎都是通过文件系统来组织和管理在计算机中所存储的大量程序和数据的。<strong>文件系统的管理功能是通过把它所管理的程序和数据组织成一系列文件的方法来实现</strong>的。而<strong>文件则是指具有文件名的若干相关元素的集合</strong>。<strong>元素通常是记录，而记录是一组有意义的数据项的集合</strong>。可以把数据组成分为数据项、记录、文件。</p><p>① <strong>数据项</strong>，数据项是最低级数据组织形式。分为<strong>基本数据项</strong>（用于描述一个对象某种属性的字符集，是数据组织中可以明明的最小逻辑数据单位，即原子数据，又称为数据元素或字段）和<strong>组合数据项</strong>（由若干个基本数据项组成）</p><p>② <strong>记录</strong>，是一组相关数据项的集合，用于描述一个对象在某方面的属性，为了能够唯一标识一个记录，需要在记录中确定<strong>一个或几个</strong>数据项，把他们的集合称为关键字，<strong>关键字是能够唯一标识一个记录的数据项。</strong></p><p>③ <strong>文件</strong>，文件是具有文件名的一组相关元素的集合，<strong>分为有结构文件和无结构文件</strong>。有结构文件由若干个相关记录组成，无结构文件则被看成一个字符流。<strong>文件是文件系统的最大数据单位。它描述了一个对象集。</strong>文件应该具有自己的属性，包括文件类型（如源文件、目标文件、可执行文件等），文件长度（文件的当前长度，也可能是最大允许长度），文件的物理位置（指示文件在哪一个设备上及在该设备的哪个位置的指针），文件的建立时间（文件最后一次修改时间）。</p><p>一个文件可对应若干个记录，一个记录可对应若干个数据项。</p><p>文件系统管理的对象有：<strong>文件</strong>（作为文件管理的直接对象），<strong>目录</strong>（为了方便用户对文件的存取和检索，在文件系统中配置目录，每个目录项中，必须含有文件名及该文件所在的物理地址，对目录的组织和管理是方便和提高对文件存取速度的关键），<strong>磁盘（磁盘）存储空间</strong>（文件和目录必定占用存储空间，对这部分空间的有效管理，不仅能提高外存的利用率，而且能提高对文件的存取速度）。</p><p><strong><u>对对象操纵和管理的软件集合：是文件管理的核心部分。</u></strong></p><p>实现了文件系统的大部分功能：对文件存储空间 的管理、对文件目录的管理、实现文件的地址转换机制、对文件读写管理以及对文件的共享和保护</p><p>文件系统的接口：命令接口（用户与文件系统）和程序接口（用户程序和文件系统）。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126101143.png" style="zoom:67%"><h4 id="2-文件操作"><a href="#2-文件操作" class="headerlink" title="(2)文件操作"></a>(2)文件操作</h4><p>① <strong>创建文件</strong>，在创建一个新文件时，系统首先要为新文件分配必要的外存空间，并在文件系统的目录中，为之建立一个目录项，目录项中应该记录新文件的文件名及其在外存的地址等属性。</p><p>② <strong>删除文件</strong>，当已不再需要某文件时，可将其从文件系统中删除，在删除时，系统应先从目录中找到要删除文件的目录项，使之成为空项，然后回收该文件所占用的存储空间。</p><p>③ <strong>读文件</strong>，读文件时，须在相应系统调用中给出文件名和应读入的内存目标地址。此时，系统要查找目录，找到指定目录项，从中得到被读文件在外存中的位置。在目录项中，还有一个指针用于对文件进行读/写。</p><p>④ <strong>写文件</strong>，写文件时，须在相应系统调用中给出文件名和其在内存源地址。此时，系统要查找目录，找到指定目录项，从再利用目录中的写指针进行写操作。</p><p>⑤ <strong>截断文件</strong>，如果一个文件的内容已经陈旧而需要全部更新时，一种方法是将此文件删除，再重新创建一个新文件，但如果文件名和属性均无改变，则可采取截断文件的方法，其将原有的文件长度设置为0，放弃原有文件的内容。</p><p>⑥ <strong>设置文件的读/写位置</strong>，用于设置文件读/写指针的位置，以便每次读/写文件时，不需要从始端开始而是从所设置的位置开始操作。可以改顺序存取为随机存取。</p><p>但对于一个实际的OS，为了方便用户使用文件而提供了更多地对文件的操作，如打开和关闭一个文件及改变文件名等操作。</p><p>当前OS所提供的大多数对文件的操作，其过程大致都是这样两步：首先，检索文件目录来找到指定文件的属性及其在外存上的位置；然后，对文件实施相应的操作，如读/写文件等，当用户要求对一个文件实施多次读/写或其他操作时，每次都要从检索目录开始，为了避免多次重复地检索目录，在大多数OS中都引入了打开这一文件系统调用，当用户第一次请求对某文件系统进行操作时，先利用open系统调用将该文件打开。</p><p><strong>打开是指系统将指名文件的属性（包括该文件在外存上的物理位置）从外存拷贝到内存打开文件表的一个表目中，并将该表目的编号（索引号）返回给用户</strong>，以后，当用户再要求对该文件进行操作时，便可利用系统所返回的索引号向系统提出操作请求，系统便可直接利用该索引号到打开文件表中去查找，从而避免了对该文件的再次检索，如果用户不再需要对该文件实施操作，可利用关闭系统调用来关闭此文件，OS将会把该文件从打开文件表中的表目上删除掉。</p><h3 id="3、文件的逻辑结构"><a href="#3、文件的逻辑结构" class="headerlink" title="3、文件的逻辑结构"></a>3、<strong>文件的逻辑结构</strong></h3><p>对任何的文件，都存在以下两种形式的结构</p><p>① <strong>文件的逻辑结构</strong>，这是从用户观点出发所观察到的文件组织形式，是用户可以直接处理的数据及其结构，独立于文件的物理特性，又称为文件组织。</p><p>② <strong>文件的物理结构</strong>，又称为文件的存储结构，是指文件在外存上的存储组织形式，不仅与存储介质有关，还与外存分配方式有关。</p><h4 id="1-文件逻辑结构的类型"><a href="#1-文件逻辑结构的类型" class="headerlink" title="(1)文件逻辑结构的类型"></a>(1)文件逻辑结构的类型</h4><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126101812.png" style="zoom:67%"><p>文件的逻辑结构可分为两大类，一类是有结构文件，这是指由一个以上的记录构成的文件，故把他称为记录式文件，另一类是无结构文件，这是指由字符流构成的文件，又称为流式文件。</p><p>① <strong>有结构文件</strong>，每个记录都用于描述实体集中的一个实体，各记录有着相同或不同数目的数据项，记录分为定长记录（文件中所有记录的长度都是相同的，所有记录中的各数据项都处在记录中相同的位置，具有相同的顺序和长度）和变长记录（文件中个记录的长度不相同，可能由于一个记录中所包含的数据项目并不相同）。根据用户和系统的需要，可采用多种方式来组织这些记录，如顺序文件（记录按照某种顺序排列所形成的文件，记录通常是定长的，能较快查找到文件中的记录），索引文件（记录为可变长度时，通常建立一张索引表，并为每个记录设置一个表项，加快对记录检索的速度），索引顺序文件（为文件建立一张索引表，为每一组记录中的第一个记录设置一个表项）。</p><p>② <strong>无结构文件</strong>，对于源程序、可执行文件、库函数等通常采用的是无结构文件形式，即流式文件，其长度以字节为单位。</p><h4 id="2-顺序文件"><a href="#2-顺序文件" class="headerlink" title="(2)顺序文件"></a>(2)顺序文件</h4><p>文件是记录的集合，文件中的记录可以是任意顺序的，因此，它可以按照各种不同的顺序进行排列，一般地，可归纳为以下两种情况。</p><p>① <strong>串结构</strong>，个记录之间的顺序与关键字无关，通常按照时间先后排序，最先存入的记录作为第一个记录，其次，为第二个记录，以此类推。</p><p>② <strong>顺序结构</strong>，文件中所有记录按照关键字排列，可以按照关键词长度从大到小排列。顺序结构的检索效率更高。</p><p>顺序文件的最佳应用场合是在对诸记录进行批量存取时，即每次要读或写一大批记录时，此时，对顺序文件的存取效率是所有逻辑文件中最高的，此外，<strong>只有顺序文件才能存储在磁带上，并能有效工作。但是想要增加或删除一个文件比较困难。</strong></p><h4 id="3-索引文件"><a href="#3-索引文件" class="headerlink" title="(3) 索引文件"></a>(3) 索引文件</h4><p>对于定长记录文件，可以方便的实现顺序存取和直接存取，然而，对于变长记录就很难实现。为了解决变长记录检索问题，可为变长记录文件建立一张索引表，对主文件中的每个记录，在索引表中设有一个相应的表项，用于记录该记录的长度L及指向该记录的指针（指向该记录在逻辑地址空间的首址），由于索引表示按记录键排序的，因此，<strong>索引表本身是一个定长记录的顺序文件</strong>。从而可以方便实现直接存取。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126102631.png" alt></p><p>在对索引文件进行检索时，首先根据用户（程序）提供的关键字，并利用折半查找检索索引表，从中找到相应的表项，再利用该表项给出的指向记录的指针值，去访问所需的记录。每当要向索引文件中增加一个新纪录时，便须对索引表进行修改。索引表的问题在于除了有主文件外，还需要配置一张索引表，每个记录需要有一个索引项，因此提高了存储费用。</p><h4 id="4-索引顺序文件"><a href="#4-索引顺序文件" class="headerlink" title="(4)索引顺序文件"></a>(4)索引顺序文件</h4><p>其有效克服了变长记录不便于直接存取的缺点，而且所付出的代价也不算太大，它是顺序文件和索引文件相结合的产物，它<strong>将顺序文件中的所有记录分为若干个组，为顺序文件建立一张索引表，在索引表中为每组中的第一个记录建立一个索引项，其中含有该记录的键值和指向记录的指针</strong>。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126102812.png" alt></p><p>在对索引顺序文件进行检索时，首先利用用户（程序）所提供的关键字及某种查找算法去检索索引表，找到该记录组中的第一个记录的表项，从中得到该记录组第一个记录在主文件中的位置，然后，再利用顺序查找法去查找主文件，从中找出所要求的记录。</p><h4 id="5-直接文件"><a href="#5-直接文件" class="headerlink" title="(5)直接文件"></a>(5)直接文件</h4><p>对于直接文件，则根据给定的记录键值，直接获得指定记录的物理地址，换言之，<strong>记录键值本身就决定了记录的物理地址</strong>，这种由记录键值到记录物理地址的转换被称为键值转换。</p><h4 id="6-哈希（Hash）文件"><a href="#6-哈希（Hash）文件" class="headerlink" title="(6)哈希（Hash）文件"></a>(6)哈希（Hash）文件</h4><p><strong>利用Hash函数可将记录键值转换为相应记录的地址</strong>，为了能实现文件存储空间的动态分配，通常由Hash函数所求得的并非是相应记录的地址，而是指向一目录表相应表目的指针，该表目的内容指向相应记录所在的物理块。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126103050.png" alt></p><h3 id="4、目录管理"><a href="#4、目录管理" class="headerlink" title="4、目录管理"></a>4、目录管理</h3><p>为了能够对文件实施有效的管理，必须对它们加以妥善组织，<strong>这主要是通过文件目录实现的，文件目录也是一种数据结构，用于标识系统中的文件及其物理地址，供检索时使用</strong>，对目录的管理要求如下</p><p>① <strong>实现按名存取</strong>，即用户只须向系统提供所需访问的文件的名字，便能够快速准确地找到指定文件在外存上的存储位置，这是目录管理中最基本的功能。</p><p>② <strong>提高对目录检索速度</strong>，通过合理地组织目录结构的方法，可加快对目录的检索速度，从而提高对文件的存取速度。</p><p>③ <strong>文件共享</strong>，在多用户系统中，应该允许用户共享一个文件。</p><p>④ <strong>允许文件重名</strong>，系统应允许不同用户对不同文件采用相同的名字，以便用户按照自己的习惯给文件命名和使用文件。</p><h4 id="1-文件控制块"><a href="#1-文件控制块" class="headerlink" title="(1)文件控制块"></a>(1)文件控制块</h4><p>为了能对文件进行正确的存取，必须为文件设置用于描述和控制文件的数据结构，称之为<strong><em>文件控制块FCB</em></strong>，文件管理程序可借助于文件控制块中的信息，对文件施加各种操作，文件与文件控制块一一对应，而人们把<u><strong>文件控制块的有序集合称为文件目录</strong></u>，一个文件控制块就是一个文件目录项。通常，<strong>一个文件目录也可被看成是一个文件，称为目录文件</strong>。</p><p>文件控制块包含基本信息、存取控制信息、使用信息。</p><p>① <strong>基本信息</strong>，包括文件名（标识一个文件的符号名，在每个系统中，每个文件都有唯一的名字，用户利用该名字进行存取）；文件物理位置（指文件在外存上的存储位置，包括存放文件的设备名、文件在外村上的起始盘块号、指示文件所占用的盘块数或字节数的文件长度）；文件逻辑结构（指示文件是流式文件还是记录式文件、记录数，文件是定长还是变长记录）；文件物理结构（指示文件是顺序文件、链式文件还是索引文件）</p><p>② <strong>存取控制信息</strong>，包括文件主的存取权限、核准用户的存取权限及一般用户的存取权限。</p><p>③ <strong>使用信息</strong>，包括文件的建立日期和时间、文件上一次修改的日期和时间及当前使用信息（这项信息包括当前已打开该文件的进程数、是否被其他进程锁住、文件在内存中是否已被修改但尚未拷贝到盘上）</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126103958.png" alt></p><h4 id="2-索引结点"><a href="#2-索引结点" class="headerlink" title="(2)索引结点"></a>(2)索引结点</h4><p><strong>文件目录通常是存放在磁盘上的</strong>，当文件很多时，文件目录可能要占用大量的盘块，<strong>检索目录文件的时候，先将存放目录文件的第一个盘块中的目录调入内存，然后把用户所给定的文件名和目录项中的文件名逐一对比</strong>。若未找到指定文件，则再将下一个盘块中的目录项调入内存。<strong>在检索目录文件时，只用到了文件名</strong>，仅当找到一个目录项（即其中的文件名与指定要查找的文件名相匹配）时，才需要从该目录项中读出该文件的物理地址，<strong>而其他一些对该文件进行描述的信息，在检索目录时一概不用，显然，这些信息在检索目录时不需要调入内存。</strong>为此，在有的系统中，如UNIX系统，便采用了把文件名和文件描述信息分开的方法，亦即，使文件描述信息单独形成一个称为索引结点的数据结构，简称为i结点，在文件目录中的每个目录项由文件名和指向该文件所对应的i结点的指针所构成。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104408.png" style="zoom:67%"><p><strong>每个文件都有唯一的磁盘索引结点（磁盘索引结点信息与文件名等信息一起构成了FCB）</strong>，其主要包括内容如下</p><p>① 文件主标识符，即拥有该文件的个人或小组的标识符。</p><p>② 文件类型，包括正规文件、目录文件或特别文件。</p><p>③ 文件存取权限，指各类用户对该文件的存取权限。</p><p>④ 文件物理地址，每个索引结点中含有13个地址项（混合索引方式），他们以直接或间接的方式给出数据文件所在的盘块的编号。</p><p>⑤ 文件长度，指以字节为单位的文件长度。</p><p>⑥ 文件连接计数，表明在本文件系统中所有指向该文件名的指针计数。</p><p>⑦ 文件存取时间，指本文件最近被进程存取的时间、最近被修改的时间及索引结点最近被修改的时间。</p><p>当文件被打开时，要将磁盘索引结点拷贝到<strong>内存索引结点</strong>中，便于以后使用，在内存索引结点中又增加了一下内容。</p><p>① 索引结点编号，用于标识内存索引结点。</p><p>② 状态，指示i结点是否上锁或被修改。</p><p>③ 访问计数，每当有进程要访问此i结点时，将访问计数加1，访问完再减1。</p><p>④ 文件所属文件系统的逻辑设备号。</p><p>⑤ 链接指针，设置有分别指向空闲链表和散列队列的指针。</p><h4 id="3-目录结构"><a href="#3-目录结构" class="headerlink" title="(3)目录结构"></a>(3)目录结构</h4><p>目录结构的组织，关系到文件系统的存取速度，也关系到文件的共享性和安全性，目前常用的目录结构形式有单级目录、两级目录、多级目录。</p><h5 id="①单级目录结构"><a href="#①单级目录结构" class="headerlink" title="①单级目录结构"></a>①<strong>单级目录结构</strong></h5><p>在整个系统中只建立一张目录表，每个文件占一个目录项，目录项中含文件名、文件扩展名、文件长度、文件类型、文件物理地址、状态位（表示目录项是否空闲）等。每当要建立一个新文件时，必须先检查所有的目录项，以保证新文件名在目录中是唯一的，然后再从目录表中找到一个空白目录项，填入新文件的文件名及其他说明信息，并置状态为1，删除文件时，先从目录中找到该文件的目录项，回收该文件所占用的存储空间，然后再清除该目录项。<strong>单级目录的有点是简单并且能够实现目录管理的基本功能-按名存取，但是查找速度慢（查找一个目录项要花费较多的时间），不允许重名（在一个目录表中的所有文件，都不能与另一个文件有相同的名字，这是难以避免的），不便于实现文件共享（每一个用户都有自己的名字空间或命名习惯，因此，应该允许不同用户使用不同的文件名来访问同一个文件）</strong></p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104840.png" alt></p><h5 id="②两级目录结构"><a href="#②两级目录结构" class="headerlink" title="②两级目录结构"></a>②<strong>两级目录结构</strong></h5><p>为每个用户建立一个单独的<strong>用户文件目录UFD</strong>（User File Directory），这些文件目录具有相似的结构，由用户所有文件的文件控制块组成。此外，系统中还有一个<strong>主文件目录MFD</strong>（Master File Directory），在主文件目录中，每个用户目录文件都占有一个目录项，其目录项包括<strong>用户名和指向用户目录文件的指针</strong>。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126104958.png" alt></p><p>两级目录结构客服了单级目录的缺点，具有如下优点：<strong>提高了检索目录的速度</strong>（如果在主目录中有n个子目录，每个用户目录最多为m个目录项，则为查找一指定的目录项，最多只需要检索n+m个目录项）。<strong>在不同的用户目录中，可以使用相同的文件名</strong>（只要在用户自己的UFD中，每个文件名都是唯一的，不同用户可以有文件名相同的文件）。<strong>不同用户还可使用不同的文件名来访问系统中同一个共享文件</strong>。但在多个用户需要合作完成一个大任务时，不便于用户之间共享文件。</p><p><u><strong>实现了对目录管理的四个要求</strong></u></p><h5 id="③多级目录结构"><a href="#③多级目录结构" class="headerlink" title="③多级目录结构"></a>③多级目录结构</h5><p>对于大型文件系统，通常采用三级或三级以上的目录结构，以提高对目录的检索速度和文件系统的性能。多级目录结构又称为树形目录结构，<strong>主目录被称为根目录</strong>，把<strong>数据文件称为树叶</strong>，<strong>其他的目录均作为树的结点</strong>。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126105127.png" alt></p><p>说明：方框代表目录文件，圆圈代表数据文件，主目录中有是哪个用户总目录A、B、C，在B用户的总目录B中，又包括三个分目录F、E、D，其中每个分目录中又包含多个文件，为提高系统的灵活性，<strong>应该允许在一个目录文件中的目录项既是作为目录文件的FCB，又是数据文件的FCB</strong>，这一信息可用目录项中的一位来指示。如用户A总目录中，目录项A是目录文件FCB，而目录项B和D则是数据文件的FCB。</p><p>在树形目录结构中，从根目录到任何数据文件，都只有一条唯一的通路，在该路径上从树的根开始，把全部目录文件名和数据文件名依次用”/“连接起来，即构成该数据文件的路径名。<strong>系统中的每个文件都有唯一的路径名</strong>。例如，用户B访问文件J，则使用路径名/B/F/J来访问。</p><p>当一个文件系统含有很多级时，每访问一个文件，都要使用从树根开始直到树叶（数据文件）为止的、包含各中间节点（目录）的全路径名，这非常麻烦，可为每个进程设置一个当前目录，又称为工作目录，进程对各文件的访问都相对于当前目录而进行的。<strong>把从当前目录开始值得数据文件为止所构成的路径名称为相对路径名</strong>，而<strong>把从树根开始的路径名称为绝对路径名</strong>。</p><p>④ <strong>增加和删除目录</strong>，在树形目录结构中，用户可为自己建立UFD，并可再创建子目录，在用户要创建一个新文件时，只需要查看自己的UFD及其子目录中有无与新建文件相同的文件名，若无，便可在UFD或其某个子目录中增加一个新目录项。在树形目录中，如何删除一个目录，应该视情况而定，若要删除的目录为空，则简单地将其删除，使它在其上一级目录中所对应的目录项为空，若不为空，可采用如下方法：<strong>不删除非空目录</strong>（当目录不为空时，为了删除一个非空目录，必须先删除目录中所有的文件，使之称为空目录，然后再删除，如果目录中包含有子目录，则应该递归调用方式删除），<strong>可删除非空目录</strong>（将目录中的所有文件和子目录同时删除）。</p><h3 id="5、目录查询技术"><a href="#5、目录查询技术" class="headerlink" title="5、目录查询技术"></a>5、目录查询技术</h3><p>当用户要访问一个已存在的文件时，系统首先利用用户提供的文件名对目录进行查询，找出该文件的文件控制块或对应索引结点，然后，根据FCB或索引结点中所记录的文件物理地址（盘块号），换算出文件在磁盘上的物理位置，最后，再通过磁盘驱动程序，将所需文件读入内存。目前常用的方式有<strong>线性检索法</strong>和<strong>Hash方法。</strong></p><h4 id="1-线性检索法"><a href="#1-线性检索法" class="headerlink" title="(1)线性检索法"></a>(1)<strong>线性检索法</strong></h4><p>又称为顺序检索法，在树形目录中，用户提供的文件名是由多个文件分量名组成的路径名，此时须对多级目录进行查找，假定用户给定的文件路径名为/usr/ast/mbox，则查找过程如下。</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126110522.png" alt></p><p>说明：首先，系统应先读入第一个文件分量名usr，用它与根目录文件（或当前目录文件）中各目录项中的文件名顺序地进行比较，从中找到匹配者，并得到匹配项的索引结点号是6，再从6号索引结点中得到usr目录文件放在132号盘块中，将该盘块内容读入内存。接着，系统再将路径名中的第二个分量名ast读入，用它与放在132号盘块中的第二级目录文件中各目录项的文件名顺序进行比较，又找到匹配项，从中得到ast的目录文件放在26号索引结点中，再从26号索引结点中得知/usr/ast是存放在496号盘块中，再读入496号盘块。然后，将文件的第三个分量名mbox读入，用它与第三季目录文件/usr/ast中各目录项的文件名进行比较，最后得到/usr/ast/mbox的索引结点号为60，即在60号索引结点中存放了指定文件的物理地址，目录查询操作到此结束，如果在顺序查找过程中发现有一个文件分量名没有找到，则停止查找，并返回文件未找到信息。</p><h4 id="2-Hash方法"><a href="#2-Hash方法" class="headerlink" title="(2)Hash方法"></a>(2)<strong>Hash方法</strong></h4><p>系统利用用户提供的文件名并将它转换为文件目录的索引值，再利用该索引值到目录中去查找，这将提高检索速度。</p><h3 id="6、文件共享"><a href="#6、文件共享" class="headerlink" title="6、文件共享"></a>6、文件共享</h3><h4 id="1-基于有向无循环图实现文件共享"><a href="#1-基于有向无循环图实现文件共享" class="headerlink" title="(1)基于有向无循环图实现文件共享"></a>(1)基于有向无循环图实现文件共享</h4><p><strong>在严格的树形结构目录中，每个文件只允许有一个父目录，父目录可以有效地拥有该文件，其它用户要想访问它，必须经过其属主目录来访问该文件。这就是说，对文件的共享是不对称的，或者说，树形结构目录是不适合文件共享的。如果允许一个文件可以有多个父目录，即有多个属于不同用户的多个目录，同时指向同一个文件，这样虽会破坏树的特性，但这些用户可用对称的方式实现文件共享，而不必再通过其属主目录来访问。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126114320.png" style="zoom:67%"><h4 id="2-利用索引结点"><a href="#2-利用索引结点" class="headerlink" title="(2)利用索引结点"></a>(2)利用索引结点</h4><p>为了解决上述问题，可以引用索引结点，即诸如文件的物理地址及其它的文件属性等信息，不再是放在目录项中，而是放在索引结点中。在文件目录中只设置文件名及指向相应索引结点的指针，如图 所示</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201126114351.png" style="zoom:67%"><h4 id="3-利用符号链实现文件共享"><a href="#3-利用符号链实现文件共享" class="headerlink" title="(3)利用符号链实现文件共享"></a>(3)<strong>利用符号链实现文件共享</strong></h4><p>为使用户B能共享用户C的一个文件F，可以由系统创建一个LINK类型的新文件，也取名为F，并将F写入用户B的目录中，已实现B的目录与文件F的链接。</p><p><strong>在新文件中只包含被链接文件F的路径名。</strong></p><p>这样的链接方法被称为符号链接。</p><p>新文件中的路径名，则被看作是符号链，当用户B要访问被链接的文件F且正要读LINK类新文件时，将被OS截获，OS根据新文件中的路径名去读该文件，于是就实现了B对文件F的共享。</p><p><strong><u>建立一种特殊的文件在这文件中只包含被链接文件F8的路径和名字。这样的链接方法被称为符号链接。</u></strong></p><p>优点</p><ul><li>在利用符号链方式实现文件共享时，只是文件主才拥有指向其索引结点的指针；</li><li>而共享该文件的其他用户则只有该文件的路径名，并不拥有指向其索引结点的指针这样，也就不会发生在文件主删除一共享文件后留下一悬空指针的情况。</li><li>当文件的拥有者把一个共享文件删除后，如果其他用户又试图通过符号链去访问一个已被删除的共享文件，则会因系统找不到该文件而使访问失败，于是再将符号链删除，此时不会产生任何影响。</li></ul><p>利用符号链的共享方式也存在着一些问题：当其他用户去读共享文件时，系统是根据给定的文件路径名逐个分量(名)地去查找目录，直至找到该文件的索引结点。因此，在每次访问共享文件时，都可能要多次地读盘。这使每次访问文件的开销甚大，且增加了启动磁盘的频率。</p><p>因为要为每个共享用户建立一条符号链，而由于链本身实际上是一个文件，尽管该文件非常简单，却仍要为它配置一个索引结点，这也要耗费一定的磁盘空间。</p></div><div><div><div style="text-align:center;color:#555;font-size:14px">-----------------------本文结束 <i class="fa fa-heart"></i> 感谢阅读-----------------------</div></div></div><div><div id="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！恰饭^.^~</div><button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214611.png" alt="峻源 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214431.png" alt="峻源 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>峻源</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://lyxf2000.github.io/posts/33c7448a/" title="操作系统【十三】">http://lyxf2000.github.io/posts/33c7448a/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/操作系统/" rel="tag"><i class="fa fa-tag">操作系统</i></a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/7ed9e7d8/" rel="next" title="操作系统【十二】"><i class="fa fa-chevron-left"></i> 操作系统【十二】</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/84ea5def/" rel="prev" title="操作系统【十四】">操作系统【十四】 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NjM0NC8yMjg1NQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif" alt="峻源"></a><p class="site-author-name" itemprop="name">峻源</p><div class="site-description motion-element" itemprop="description">乐于心，乐与心，乐之屿，心扉间</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">122</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:1194320636@qq.com" title="QE-Mail &rarr; mailto:1194320636@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QE-Mail</a> </span><span class="links-of-author-item"><a href="https://music.163.com/#/playlist?id=699716432" title="CloudMusic &rarr; https://music.163.com/#/playlist?id=699716432" rel="noopener" target="_blank"><i class="fa fa-fw fa-music"></i>CloudMusic</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="https://www.baidu.com/" rel="noopener" target="_blank">百度</a></li><li class="links-of-blogroll-item"><a href="https://www.google.com/?hl=zh_CN" title="https://www.google.com/?hl=zh_CN" rel="noopener" target="_blank">谷歌</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/" title="https://www.zhihu.com/" rel="noopener" target="_blank">知乎</a></li><li class="links-of-blogroll-item"><a href="https://juejin.im/" title="https://juejin.im/" rel="noopener" target="_blank">掘金</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="https://github.com/" rel="noopener" target="_blank">github</a></li><li class="links-of-blogroll-item"><a href="https://www.luogu.org/" title="https://www.luogu.org/" rel="noopener" target="_blank">洛谷</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#七、文件管理"><span class="nav-number">1.</span> <span class="nav-text">七、文件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、文件管理功能"><span class="nav-number">1.1.</span> <span class="nav-text">1、文件管理功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、文件和文件系统"><span class="nav-number">1.2.</span> <span class="nav-text">2、文件和文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-文件系统"><span class="nav-number">1.2.1.</span> <span class="nav-text">(1)文件系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-文件操作"><span class="nav-number">1.2.2.</span> <span class="nav-text">(2)文件操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、文件的逻辑结构"><span class="nav-number">1.3.</span> <span class="nav-text">3、文件的逻辑结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-文件逻辑结构的类型"><span class="nav-number">1.3.1.</span> <span class="nav-text">(1)文件逻辑结构的类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-顺序文件"><span class="nav-number">1.3.2.</span> <span class="nav-text">(2)顺序文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-索引文件"><span class="nav-number">1.3.3.</span> <span class="nav-text">(3) 索引文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-索引顺序文件"><span class="nav-number">1.3.4.</span> <span class="nav-text">(4)索引顺序文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-直接文件"><span class="nav-number">1.3.5.</span> <span class="nav-text">(5)直接文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-哈希（Hash）文件"><span class="nav-number">1.3.6.</span> <span class="nav-text">(6)哈希（Hash）文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、目录管理"><span class="nav-number">1.4.</span> <span class="nav-text">4、目录管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-文件控制块"><span class="nav-number">1.4.1.</span> <span class="nav-text">(1)文件控制块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-索引结点"><span class="nav-number">1.4.2.</span> <span class="nav-text">(2)索引结点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-目录结构"><span class="nav-number">1.4.3.</span> <span class="nav-text">(3)目录结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#①单级目录结构"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">①单级目录结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#②两级目录结构"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">②两级目录结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#③多级目录结构"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">③多级目录结构</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、目录查询技术"><span class="nav-number">1.5.</span> <span class="nav-text">5、目录查询技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-线性检索法"><span class="nav-number">1.5.1.</span> <span class="nav-text">(1)线性检索法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Hash方法"><span class="nav-number">1.5.2.</span> <span class="nav-text">(2)Hash方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、文件共享"><span class="nav-number">1.6.</span> <span class="nav-text">6、文件共享</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-基于有向无循环图实现文件共享"><span class="nav-number">1.6.1.</span> <span class="nav-text">(1)基于有向无循环图实现文件共享</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-利用索引结点"><span class="nav-number">1.6.2.</span> <span class="nav-text">(2)利用索引结点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-利用符号链实现文件共享"><span class="nav-number">1.6.3.</span> <span class="nav-text">(3)利用符号链实现文件共享</span></a></li></ol></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">峻源</span></div><span>本站已运行<span id="showDays"></span></span><script>var seconds=1e3,minutes=60*seconds,hours=60*minutes,days=24*hours,years=365*days,birthDay=Date.UTC(2019,8,1,14,0,0);setInterval(function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),h=Date.UTC(s,t,a,o,r,n),u=h-birthDay,d=Math.floor(u/years),y=Math.floor(u/days-365*d),i=Math.floor((u-(365*d+y)*days)/hours),l=Math.floor((u-(365*d+y)*days-i*hours)/minutes),M=Math.floor((u-(365*d+y)*days-i*hours-l*minutes)/seconds);document.getElementById("showDays").innerHTML=""+d+"年"+y+"天"+i+"小时"+l+"分钟"+M+"秒"},1e3)</script><div><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_uv">访问人数：<span id="busuanzi_value_site_uv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-eye"></i> <span id="busuanzi_container_site_pv">总访问量：<span id="busuanzi_value_site_pv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-pencil"></i> <span class="post-count">博客全站共 453.9k 字</span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/affix.js?v=7.2.0"></script><script src="/js/schemes/pisces.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script>window.livereOptions={refer:"posts/33c7448a/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link rel="stylesheet" href="/dist/APlayer.min.css"><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><script type="text/javascript" src="/dist/music.js"></script><script type="text/javascript" src="/js/firework.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:220,height:400},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html><!-- rebuild by neat -->