<!-- build time:Tue Oct 12 2021 11:53:23 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2"><meta name="google-site-verification" content="4fXg7_br-6EcJkwb-a6Ci2NLdRf7aMleAsM1L9S1nBI"><link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/2.ico?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/1.ico?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!0,fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="三、处理机调度操作系统学习笔记-9：调度WHAT：按什么原则分配CPU—进程调度算法WHEN：何时分配CPU —进程调度的时机HOW：如何分配CPU —CPU调度过程（进程的上下文切换）1、处理机调度的层次和调度算法的目标进程调度是控制、协调进程对CPU的竞争,即按一定的调度算法从就绪队列中选中一个进程，把CPU的使用权交给被选中的进程一个作业，从进入系统并驻留在外存的后备队列上开始，直至作业运行"><meta name="keywords" content="操作系统"><meta property="og:type" content="article"><meta property="og:title" content="操作系统【五】"><meta property="og:url" content="http://lyxf2000.github.io/posts/1f714689/index.html"><meta property="og:site_name" content="乐屿心扉"><meta property="og:description" content="三、处理机调度操作系统学习笔记-9：调度WHAT：按什么原则分配CPU—进程调度算法WHEN：何时分配CPU —进程调度的时机HOW：如何分配CPU —CPU调度过程（进程的上下文切换）1、处理机调度的层次和调度算法的目标进程调度是控制、协调进程对CPU的竞争,即按一定的调度算法从就绪队列中选中一个进程，把CPU的使用权交给被选中的进程一个作业，从进入系统并驻留在外存的后备队列上开始，直至作业运行"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007193118.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007195536.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007200832.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007200929.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007202201.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017105002.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204715.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204732.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204751.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204932.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017101251.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017101344.png"><meta property="og:updated_time" content="2021-09-22T13:30:54.861Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="操作系统【五】"><meta name="twitter:description" content="三、处理机调度操作系统学习笔记-9：调度WHAT：按什么原则分配CPU—进程调度算法WHEN：何时分配CPU —进程调度的时机HOW：如何分配CPU —CPU调度过程（进程的上下文切换）1、处理机调度的层次和调度算法的目标进程调度是控制、协调进程对CPU的竞争,即按一定的调度算法从就绪队列中选中一个进程，把CPU的使用权交给被选中的进程一个作业，从进入系统并驻留在外存的后备队列上开始，直至作业运行"><meta name="twitter:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007193118.png"><link rel="canonical" href="http://lyxf2000.github.io/posts/1f714689/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>操作系统【五】 | 乐屿心扉</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">乐屿心扉</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Keep Thinking</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-playlist"><a href="/playlist/" rel="section"><i class="menu-item-icon fa fa-fw fa-music"></i><br>歌单</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://lyxf2000.github.io/posts/1f714689/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="峻源"><meta itemprop="description" content="乐于心，乐与心，乐之屿，心扉间"><meta itemprop="image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乐屿心扉"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">操作系统【五】</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-10-07 19:14:48" itemprop="dateCreated datePublished" datetime="2020-10-07T19:14:48+08:00">2020-10-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-09-22 21:30:54" itemprop="dateModified" datetime="2021-09-22T21:30:54+08:00">2021-09-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/操作系统/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a></span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">字数统计:</span> <span class="post-count">4.7k(字)</span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">16(分)</span></span><br><p></p></div></header><div class="post-body" itemprop="articleBody"><h2 id="三、处理机调度"><a href="#三、处理机调度" class="headerlink" title="三、处理机调度"></a>三、处理机调度</h2><hr><blockquote><p><a href="https://chorer.github.io/2020/04/11/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9%EF%BC%9A%E8%B0%83%E5%BA%A6/" target="_blank" rel="noopener">操作系统学习笔记-9：调度</a></p></blockquote><p><strong>WHAT：按什么原则分配CPU—进程调度算法</strong></p><p><strong>WHEN：何时分配CPU —进程调度的时机</strong></p><p><strong>HOW：如何分配CPU —CPU调度过程（进程的上下文切换）</strong></p><h3 id="1、处理机调度的层次和调度算法的目标"><a href="#1、处理机调度的层次和调度算法的目标" class="headerlink" title="1、处理机调度的层次和调度算法的目标"></a>1、<strong>处理机调度的层次和调度算法的目标</strong></h3><p><strong><u>进程调度是控制、协调进程对CPU的竞争,即按一定的调度算法从就绪队列中选中一个进程，把CPU的使用权交给被选中的进程</u></strong></p><p><strong>一个作业，从进入系统并驻留在外存的后备队列上开始，直至作业运行完毕，可能要经历下面三级调度</strong></p><ul><li><p>高级调度(High Scheduling，<strong>作业调度</strong>)</p><ul><li><p>作业调度也即高级调度，这个阶段可以看作是准备阶段。主要任务是按照一定的规则从外存上处于后备队列的作业中挑选一个或多个作业，为其分配内存，建立 PCB（进程） 等，使它们具备竞争处理机的能力。</p><p>这个阶段进程的状态变化是：无 –&gt; 创建态 –&gt; 就绪态</p></li></ul></li><li><p>中级调度(Intermediate-Level Scheduling，提高<strong>内存</strong>使用率)</p><ul><li><p>内存调度也即中级调度，这个阶段可以看作是优化阶段。主要任务是将暂时不能运行的进程对换到外存中，使它们挂起；而当挂起的进程具备运行条件时，它们会被重新对换回内存，得到激活。这个阶段的主要目的是提高内存利用率和系统吞吐量。</p><p>这个阶段进程的状态变化是： 静止就绪态 –&gt; 活动就绪态，静止阻塞态 –&gt; 活动阻塞态</p></li></ul></li><li><p>低级调度(Low Level Scheduling，<strong>进程调度</strong>)</p><ul><li><p>进程调度即低级调度，这个阶段让进程真正运行起来。主要任务是按照某种算法，从就绪队列中选取一个进程，分配处理机给它。进程调度是最基本、次数最频繁的阶段。</p><p>这个阶段进程的状态变化是： 就绪态 –&gt; 活动态</p></li></ul></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007193118.png" style="zoom:67%"><h3 id="2、作业与作业调度"><a href="#2、作业与作业调度" class="headerlink" title="2、作业与作业调度"></a>2、作业与作业调度</h3><p><strong>作业</strong> 是一个比程序更加广泛的概念，它不仅包含了通常的程序和数据，而且还应配有一份作业说明书，系统根据该说明书来对程序的运行进行控制。在批处理系统中，是以作业为基本单位从外存调入内存的。</p><p>作业步：在作业运行期间每个作业都必须经过若干个相对独立又相互关联的的顺序加工步骤才能得到结果，我们把其中每一个加工步骤称为一个作业步。例如程序作业分为编译、链接、运行作业步。</p><h4 id="1-几个概念"><a href="#1-几个概念" class="headerlink" title="(1)几个概念"></a>(1)几个概念</h4><p><strong>周转时间——指作业提交给系统开始，到作业完成为止的这段时间间隔</strong></p><ul><li><strong>周转时间通常作为评价批处理系统性能、选择作业调度方式与算法的准则。</strong></li></ul><p><strong>多道程序度：即允许多少个作业同时在内存中运行。</strong></p><ul><li>允许多少个作业同时在内存中运行，取决于多道程序度。作业太多 服务质量下降 作业太少 资源利用率低。<strong>需要适当的折衷</strong></li></ul><p><strong>吞吐量：是指在单位时间内系统所完成的作业数(或工作量）。</strong></p><h4 id="2-进程调度方式"><a href="#2-进程调度方式" class="headerlink" title="(2)进程调度方式"></a>(2)<strong>进程调度方式</strong></h4><p><strong>非抢占式：</strong>“非抢占”即“不能抢占”。一旦把处理机分配给某个进程后，除非该进程终止或者主动要求进入阻塞态，否则会一直运行下去，不允许其它进程抢占自己占有的处理机。</p><p><strong>抢占式：</strong>把处理机分配给某个进程 A 后，如果有一个更重要、更紧急的进程 B 需要用到处理机，那么进程 A 会立即暂停，把处理机交给进程 B。</p><h3 id="3、调度算法"><a href="#3、调度算法" class="headerlink" title="3、调度算法"></a>3、调度算法</h3><ul><li><strong>CPU 利用率：</strong><code>忙碌的时间 / 总时间</code></li><li><strong>系统吞吐量：</strong><code>完成作业量 / 总时间</code></li><li><strong>周转时间：</strong><code>作业完成时间 - 作业提交时间 = 作业实际运行的时间 + 等待时间</code></li><li><strong>平均周转时间：</strong> <code>各作业周转时间之和 / 作业数</code></li><li><strong>带权周转时间：</strong><code>周转时间 / 作业实际运行的时间</code></li><li><strong>平均带权周转时间：</strong><code>各作业带权周转时间之和 / 作业数</code></li><li><strong>等待时间：</strong>进程或者作业处于等待处理机状态的时间之和，即 <code>周转时间 - 作业实际运行的时间</code><ul><li>对于进程来说，等待时间指的是进程建立后等待被服务的时间之和（由于等待 I/O 完成的期间也属于被服务时间，所以这个时间不计入等待时间）</li><li>对于作业来说，除了进程建立后的等待时间，还包括作业在外存后备队列中等待的时间</li></ul></li><li><strong>平均等待时间：</strong>各作业等待时间之和 / 作业数</li><li><strong>响应时间：</strong>从用户提交请求到首次产生响应所用的时间</li></ul><h4 id="1-FCFS-算法"><a href="#1-FCFS-算法" class="headerlink" title="(1) FCFS 算法"></a>(1) FCFS 算法</h4><p>FCFS 算法即“先来先服务”算法，类似于我们生活中的排队，谁先来，谁就先享受服务。对于作业调度，它指的是谁先到达后备队列，谁就先出队，进而先被执行；对于进程调度，它指的是谁先到达就绪队列，谁就先出队，进而先被执行。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007195536.png" style="zoom:67%"><ul><li>FCFS 算法是<strong>非抢占式的算法</strong>，不存在某个进程在执行的时候被其它进程抢占处理机的情况。</li><li>它的优点是公平、算法实现简单，并且不会导致饥饿（不管等多久，所有进程最后都会运行，不存在某个进程永远得不到处理机的情况）</li><li>缺点是对<strong>长作业有利、对短作业不利</strong> —— 对于长作业，如果它先到，那么它自然无需做过多的等待，而即使是后到，它等待短作业的时间也是不足挂齿的，所以长作业怎么都不亏；对于短作业，如果它先到，自然也无需做过多等待，但是如果它后到，那么它不得不花很长的时间去等待长作业完成，然而它自己运行所需的时间却是很短的，所以说这个算法对短作业不利。在这种情况下，短作业的带权周转时间会很大，也即周转时间远远大于实际运行时间，表示有大量时间用于等待。</li><li>有时候也说 FCFS 算法对 <strong>CPU 繁忙型作业有利，对 I/O 繁忙型作业不利。</strong>这是因为 CPU 繁忙型作业的特点是需要大量的 CPU 时间进行计算，而很少请求 I/O 操作，通常视作长作业。</li><li><strong>适用于批处理系统，不适于分时系统</strong></li></ul><h4 id="2-短作业-进程-优先调度算法SJ-P-F"><a href="#2-短作业-进程-优先调度算法SJ-P-F" class="headerlink" title="(2)短作业(进程)优先调度算法SJ(P)F"></a>(2)短作业(进程)优先调度算法SJ(P)F</h4><p>短作业(进程)优先调度算法SJ(P)F，以要求运行时间长短进行调度，即启动要求运行时间最短的作业。<strong>==每次调度时选择当前已到达且运行时间最短的作业/进程.==</strong></p><p><strong>可以分别用于作业调度和进程调度</strong></p><p>短作业优先(SJF)的调度算法，是从后备队列中选择一个或若干个估计运行时间最短的作业，将它们调入内存运行；</p><p>短进程优先(SPF)调度算法，则是从就绪队列中选出一估计运行时间最短的进程，将处理机分配给它，使它立即执行并一直执行到完成，或发生某事件而被阻塞放弃处理机时，再重新调度。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007200832.png" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007200929.png" style="zoom:80%"><p><u><strong>SJF平均周转时间和平均带权周转时间明显改善</strong></u></p><ul><li><strong>SJF 算法的优点在于，它拥有“最短的”平均等待时间和平均周转时间</strong></li><li>缺点在于，虽然这次顾及了短作业，但是没有顾及长作业，<strong>对长作业是不利的。</strong>因为一旦短作业源源不断进入，那么它们就会不断跑在长作业前面，<strong>导致长作业永远无法运行，产生“饥饿”甚至“饿死”现象。</strong></li><li>另外一个缺点是，在实际实现中，要做到真正意义上的短作业优先，具有一定难度.由于作业(进程)的长短只是根据用户所提供的估计执行时间而定的，而用户又可能会有意或无意地缩短其作业的估计运行时间，致使该算法不一定能真正做到短作业优先调度。</li></ul><h4 id="3-高优先权优先（HPF，Highest-Priority-First）调度算法"><a href="#3-高优先权优先（HPF，Highest-Priority-First）调度算法" class="headerlink" title="(3)高优先权优先（HPF，Highest Priority First）调度算法"></a>(3)高优先权优先（HPF，Highest Priority First）调度算法</h4><p><strong>非抢占式优先权调度算法</strong></p><ul><li><strong>系统一旦把处理机分配给就绪队列中优先权最高的进程后，该进程便一直执行下去，直至完成，或因发生某事件使该进程放弃处理机时，系统才将处理机重新分配给另一优先权最高的进程</strong></li><li>主要用于批处理系统中，也可用于某些对实时性要求不严的实时系统中</li></ul><p><strong>抢占式优先权调度算法</strong></p><ul><li><strong>把处理机分配给优先权最高的进程，但在执行期间，只要出现另一个优先权更高的进程，则进程调度程序就立即停止当前进程的执行，并将处理机分配给新到的优先权最高的进程</strong></li><li><strong>注意：只要系统中出现一个新的就绪进程，就进行优先权比较</strong></li></ul><p><strong>优先权的类型</strong></p><ul><li><strong>静态优先权</strong><ul><li>静态优先权在创建进程时确定，且在进程的整个运行期间保持不变。</li><li>一般地，优先权是利用某一范围内的一个整数来表示的，例如，0-7或0-255，又把该整数称为优先数</li><li>确定进程优先权的依据有如下三个方面：<ul><li>(1) 进程类型。 系统进程的优先权高于一般用户进程。</li><li>(2) 进程对资源的需求。 如进程的估计执行时间及内存需要量少的进程，应赋予较高的优先权</li><li>(3) 用户要求。 由用户进程的紧迫程度和用户所付费用的多少来确定优先权。</li></ul></li><li><strong>系统开销小、不够精确、一般用在要求不高的系统中</strong></li><li><strong>问题：用户将优先权设的较高，对其他进程不利！！短进程优先对长进程不利！！</strong></li><li><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007202201.png" style="zoom:67%"></li></ul></li><li><strong>动态优先权</strong><ul><li><strong>随进程的推进或随其等待时间的增加而改变，以获得更好的调度性能</strong></li><li><strong>可规定，在就绪队列中的进程，随其等待时间的增长，其优先权以速率a提高</strong></li><li><strong>具有相同优先权初值的进程，则最先进入就绪队列，其将因其动态优先权变得最高而优先获得处理机，此即FCFS算法</strong></li><li><strong>具有各不相同的优先权初值的就绪进程，则优先权初值低的进程，在等待了足够的时间后，其优先权便可能升为最高，从而可以获得处理机</strong></li><li><strong>当采用抢占式优先权调度算法时，如果再规定当前进程的优先权以速率b下降，则可防止一个长作业长期地垄断处理机</strong></li></ul></li></ul><h4 id="4-高响应比优先调度算法（HRF）"><a href="#4-高响应比优先调度算法（HRF）" class="headerlink" title="(4)高响应比优先调度算法（HRF）"></a>(4)高响应比优先调度算法（HRF）</h4><p>是FCFS和SJF的结合，克服了两种算法的缺点</p><p>调度策略：响应比最高的作业优先启动</p><p><strong>==响应比（优先权） = （ 等待时间+实际服务时间 ）/ 实际服务时间 =响应时间/实际服务时间= 等待时间 / 实际服务时间 + 1==</strong></p><p>==<strong>注意这里“要求服务的时间”就是实际需要运行的时间，等待时间则是从进程到达就绪队列的那一刻起，到发生进程调度这一段所花费的时间。</strong>==</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017105002.png" style="zoom:67%"><p><strong><em>可以说它同时综合了 FCFS 算法和 SJF 算法的优点。为什么优先调度响应比高的进程？因为当两个进程的等待时间一样时，响应比越高的进程，它的实际运行时间越短，这一点类似于 SJF 算法，优先顾及运行时间短的进程；而当两个进程的实际运行时间一样时，响应比越高的进程，它的等待时间越长，等待时间越长说明该进程越先到达，这一点类似于 FCFS 算法，优先顾及先到达的进程。</em></strong></p><ul><li><strong>等待时间相同的作业，则要求服务的时间愈短，其优先权愈高，<u>——对短作业有利</u></strong></li><li><strong>要求服务的时间相同的作业，则等待时间愈长，其优先权愈高， <u>——是先来先服务</u></strong></li><li><strong>长作业，优先权随等待时间的增加而提高，其等待时间足够长时，其优先权便可升到很高， 从而也可获得处理机,<u>——对长作业有利</u></strong></li></ul><p>是一种折衷，既照顾了短作业，又考虑了作业到达的先后次序，又不会使长作业长期得不到服务。</p><h4 id="5-简单的时间片轮转法-RR—Round-Robin"><a href="#5-简单的时间片轮转法-RR—Round-Robin" class="headerlink" title="(5)简单的时间片轮转法(RR—Round Robin)"></a>(5)简单的时间片轮转法(RR—Round Robin)</h4><p>系统将所有的就绪进程按先来先服务的原则排成一个队列，每次调度时，把CPU分配给队首进程，并令其执行一个时间片当执行的时间片用完时，由一个计时器发出时钟中断请求，调度程序便停止该进程的执行，并将其放就绪队列尾；然后，再把处理机分配给就绪队列中新的队首。时间片的大小从几ms到几百ms</p><ul><li><strong>优点：公平。保证就绪队列中所有进程在一给定的时间内，均能获得一时间片的处理机执行时间</strong></li><li><strong>缺点：紧迫任务响应慢。UNIX中采用：时间片+优先权</strong></li></ul><p><strong>==注意：先入新到的进程，在放入时间片完的进程==</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204715.png" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204732.png" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204751.png" style="zoom:67%"><h4 id="6-多级反馈队列调度算法"><a href="#6-多级反馈队列调度算法" class="headerlink" title="(6)多级反馈队列调度算法"></a>(6)多级反馈队列调度算法</h4><p>设置多个就绪队列，并为各个队列赋予不同的优先级第一个队列的优先级最高，第二个队列次之，其余各队列的优先权逐个降低该算法赋予各个队列中进程执行时间片的大小也各不相同在优先权愈高的队列中，为每个进程所规定的执行时间片就愈小。例如，第二个队列的时间片要比第一个队列的时间片长一倍，……，第i+1个队列的时间片要比第i个队列的时间片长一倍</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201007204932.png" style="zoom:67%"><ul><li><strong>有多个级别的就绪队列，各级队列优先级从高到低，时间片从小到大</strong></li><li><strong>每次有新进程到达，都会首先进入第一级队列，并按 FCFS 算法被分配时间片。如果时间片用完了而进程还没执行完，那么该进程将被送到下一级队列队尾。如果当前已经是最后一级，则重新放回当前队列队尾</strong></li><li><strong>仅当第1~(i-1) 队列均空时，才会调度第i队列中的进程运行</strong></li><li><strong>第i队列中某进程正在运行时，该进程因等待事件发生而进入阻塞队列，等待事件发生后，调度程序把进程放回到第i队列的末尾</strong></li><li><strong>第i队列中某进程正在运行时，又有新进程进入优先权较高的队列(第1~(i-1)中的任何一个队列)，则此时新进程将抢占正在运行进程的处理机，调度程序把正在运行的进程放回到第i队列的末尾</strong></li></ul><p>多级反馈队列调度算法具有较好的性能，能较好的满足各种类型用户的需要。</p><p>终端型作业用户。大多属于较小的交互性作业，只要能使作业在第一队列的时间片内完成，便可令用户满意。</p><p>短批处理作业用户。周转时间仍然较短，至多在第二到三队列即可完成。</p><p>长批处理作业用户。将依次在1~n级队列中轮转执行，不必担心作业长期得不到处理。</p><h3 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h3><h4 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h4><p>关于多道程序调度。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017101251.png" style="zoom:80%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20201017101344.png" style="zoom:80%"><p><strong>关于如何画表，确实没找到太好的方法。</strong></p><p>思路1：按照每一段小阶段进行思考划分</p><ul><li>原因：只有前一段配合成功且完毕了，后面才能顺序执行下去。且不会有矛盾。</li><li>优点：画出来就结束，无需修改前面的部分。</li><li>缺点：小阶段的时间段不一致，需要考虑空闲时间是否会发生占领CPU。这样就需要往下考虑一个阶段。破坏了按照每个阶段思考划分的规矩。<ul><li>方法1：按照每个小阶段的最大时间段划分，将不足的进程小阶段后面的时间段切割为两部分拨给前面一部分的作为补充。</li><li>缺点：数量多了容易造成切割多份，增加数量麻烦度。而且造成大量挪移问题。不推荐。</li></ul></li></ul><p>思路2：按照优先级从高到底划分思考，</p><ul><li>原因：优先级高的CPU不会被抢占，只会抢占别人CPU，所以先画优先级高的避免CPU线上的的修改。</li><li>优点：这样做CPU不需要每次修改了，若低优先级CPU发现使用段中有高优先级CPU，只需要将低优先级分割开，将剩下的部分画到高优先级运行后的空闲段即可。</li><li>缺点：若低优先级IO段出现在了高优先级某个IO段开始的前面，需要将高优先级IO段以及后面的小阶段后推。因为IO无法抢占，低优先级的IO先到就使用IO。</li></ul><p>思路3：结合使用。将各个小阶段划分为组，每组优先级从高到低，将每组画完。</p><ul><li>优点：使得思路2中若有IO出现在前面使得相应进程的之后所有阶段需要后挪的问题中，我们需要挪移的小阶段变少。同时兼顾无需修改CPU的优点。</li></ul><p><strong>因为题目不会很复杂使你需要挪很多。所以做题常用思路2，若出现IO挪移问题则使用思路3。</strong></p><p><strong>黑笔画表，铅笔涂改。</strong></p></div><div><div><div style="text-align:center;color:#555;font-size:14px">-----------------------本文结束 <i class="fa fa-heart"></i> 感谢阅读-----------------------</div></div></div><div><div id="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！恰饭^.^~</div><button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214611.png" alt="峻源 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214431.png" alt="峻源 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>峻源</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://lyxf2000.github.io/posts/1f714689/" title="操作系统【五】">http://lyxf2000.github.io/posts/1f714689/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/操作系统/" rel="tag"><i class="fa fa-tag">操作系统</i></a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/98cf7651/" rel="next" title="JavaEE程序设计【九】"><i class="fa fa-chevron-left"></i> JavaEE程序设计【九】</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/7a7f0d50/" rel="prev" title="操作系统【六】">操作系统【六】 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NjM0NC8yMjg1NQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif" alt="峻源"></a><p class="site-author-name" itemprop="name">峻源</p><div class="site-description motion-element" itemprop="description">乐于心，乐与心，乐之屿，心扉间</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">124</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:1194320636@qq.com" title="QE-Mail &rarr; mailto:1194320636@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QE-Mail</a> </span><span class="links-of-author-item"><a href="https://music.163.com/#/playlist?id=699716432" title="CloudMusic &rarr; https://music.163.com/#/playlist?id=699716432" rel="noopener" target="_blank"><i class="fa fa-fw fa-music"></i>CloudMusic</a> </span><span class="links-of-author-item"><a href="tencent://message/?uin=1194320636&Site=&menu=yes" title="QQ &rarr; tencent://message/?uin=1194320636&Site=&menu=yes" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QQ</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="https://www.baidu.com/" rel="noopener" target="_blank">百度</a></li><li class="links-of-blogroll-item"><a href="https://www.google.com/?hl=zh_CN" title="https://www.google.com/?hl=zh_CN" rel="noopener" target="_blank">谷歌</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/" title="https://www.zhihu.com/" rel="noopener" target="_blank">知乎</a></li><li class="links-of-blogroll-item"><a href="https://juejin.im/" title="https://juejin.im/" rel="noopener" target="_blank">掘金</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="https://github.com/" rel="noopener" target="_blank">github</a></li><li class="links-of-blogroll-item"><a href="https://www.luogu.org/" title="https://www.luogu.org/" rel="noopener" target="_blank">洛谷</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#三、处理机调度"><span class="nav-number">1.</span> <span class="nav-text">三、处理机调度</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、处理机调度的层次和调度算法的目标"><span class="nav-number">1.1.</span> <span class="nav-text">1、处理机调度的层次和调度算法的目标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、作业与作业调度"><span class="nav-number">1.2.</span> <span class="nav-text">2、作业与作业调度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-几个概念"><span class="nav-number">1.2.1.</span> <span class="nav-text">(1)几个概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-进程调度方式"><span class="nav-number">1.2.2.</span> <span class="nav-text">(2)进程调度方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、调度算法"><span class="nav-number">1.3.</span> <span class="nav-text">3、调度算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-FCFS-算法"><span class="nav-number">1.3.1.</span> <span class="nav-text">(1) FCFS 算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-短作业-进程-优先调度算法SJ-P-F"><span class="nav-number">1.3.2.</span> <span class="nav-text">(2)短作业(进程)优先调度算法SJ(P)F</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-高优先权优先（HPF，Highest-Priority-First）调度算法"><span class="nav-number">1.3.3.</span> <span class="nav-text">(3)高优先权优先（HPF，Highest Priority First）调度算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-高响应比优先调度算法（HRF）"><span class="nav-number">1.3.4.</span> <span class="nav-text">(4)高响应比优先调度算法（HRF）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-简单的时间片轮转法-RR—Round-Robin"><span class="nav-number">1.3.5.</span> <span class="nav-text">(5)简单的时间片轮转法(RR—Round Robin)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-多级反馈队列调度算法"><span class="nav-number">1.3.6.</span> <span class="nav-text">(6)多级反馈队列调度算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#习题"><span class="nav-number">1.4.</span> <span class="nav-text">习题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#调度算法"><span class="nav-number">1.4.1.</span> <span class="nav-text">调度算法</span></a></li></ol></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">峻源</span></div><span>本站已运行<span id="showDays"></span></span><script>var seconds=1e3,minutes=60*seconds,hours=60*minutes,days=24*hours,years=365*days,birthDay=Date.UTC(2019,8,1,14,0,0);setInterval(function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),h=Date.UTC(s,t,a,o,r,n),u=h-birthDay,d=Math.floor(u/years),y=Math.floor(u/days-365*d),i=Math.floor((u-(365*d+y)*days)/hours),l=Math.floor((u-(365*d+y)*days-i*hours)/minutes),M=Math.floor((u-(365*d+y)*days-i*hours-l*minutes)/seconds);document.getElementById("showDays").innerHTML=""+d+"年"+y+"天"+i+"小时"+l+"分钟"+M+"秒"},1e3)</script><div><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_uv">访问人数：<span id="busuanzi_value_site_uv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-eye"></i> <span id="busuanzi_container_site_pv">总访问量：<span id="busuanzi_value_site_pv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-pencil"></i> <span class="post-count">博客全站共 464.2k 字</span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/affix.js?v=7.2.0"></script><script src="/js/schemes/pisces.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script>window.livereOptions={refer:"posts/1f714689/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link rel="stylesheet" href="/dist/APlayer.min.css"><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><script type="text/javascript" src="/dist/music.js"></script><script type="text/javascript" src="/js/firework.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:220,height:400},mobile:{show:!1},react:{opacity:.9},log:!1})</script></body></html><!-- rebuild by neat -->