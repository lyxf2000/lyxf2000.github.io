<!-- build time:Tue Oct 12 2021 10:18:10 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2"><meta name="google-site-verification" content="4fXg7_br-6EcJkwb-a6Ci2NLdRf7aMleAsM1L9S1nBI"><link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/2.ico?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/1.ico?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!0,fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="第三章 数据链路层3.1 使用点对点信道的数据链路层数据链路层属于计算机网络的低层，数据链路层使用的信道主要有以下两种类型：点对点信道。这种信道使用一对一的点对点通信方式。广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。当我们专心研究数据链路层找那个的问题的时候，在许多情况下我们可以只关心在协议栈中水平"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络【三】"><meta property="og:url" content="http://lyxf2000.github.io/posts/aaf5fde3/index.html"><meta property="og:site_name" content="乐屿心扉"><meta property="og:description" content="第三章 数据链路层3.1 使用点对点信道的数据链路层数据链路层属于计算机网络的低层，数据链路层使用的信道主要有以下两种类型：点对点信道。这种信道使用一对一的点对点通信方式。广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。当我们专心研究数据链路层找那个的问题的时候，在许多情况下我们可以只关心在协议栈中水平"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://pic4.zhimg.com/80/v2-0308b5261c29ca50c08a410115f8f0c3_720w.jpg"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406192622692.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193714036.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193843841.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193952573.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406194437322.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210611193713335.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406195426893.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406195917541.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406201101904.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406201123393.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406211537007.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406211933432.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406212506012.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406213232733.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406213838809.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406214012390.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406214309230.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406215435896.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613120632798.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613121031804.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407082910042.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613121232824.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407083445537.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084017684.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084136061.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084149687.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084613113.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084951486.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407085152677.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407085839310.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090016548.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090044992.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090509858.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090613941.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091113480.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091148089.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091255442.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091559894.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092608709.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092616001.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092626399.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092634898.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092649842.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104352387.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104456199.png"><meta property="og:image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104618267.png"><meta property="og:updated_time" content="2021-10-11T12:59:19.329Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="计算机网络【三】"><meta name="twitter:description" content="第三章 数据链路层3.1 使用点对点信道的数据链路层数据链路层属于计算机网络的低层，数据链路层使用的信道主要有以下两种类型：点对点信道。这种信道使用一对一的点对点通信方式。广播信道。这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。当我们专心研究数据链路层找那个的问题的时候，在许多情况下我们可以只关心在协议栈中水平"><meta name="twitter:image" content="https://pic4.zhimg.com/80/v2-0308b5261c29ca50c08a410115f8f0c3_720w.jpg"><link rel="canonical" href="http://lyxf2000.github.io/posts/aaf5fde3/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>计算机网络【三】 | 乐屿心扉</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">乐屿心扉</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Keep Thinking</h1></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-playlist"><a href="/playlist/" rel="section"><i class="menu-item-icon fa fa-fw fa-music"></i><br>歌单</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://lyxf2000.github.io/posts/aaf5fde3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="峻源"><meta itemprop="description" content="乐于心，乐与心，乐之屿，心扉间"><meta itemprop="image" content="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乐屿心扉"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">计算机网络【三】</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-03-27 20:41:25" itemprop="dateCreated datePublished" datetime="2021-03-27T20:41:25+08:00">2021-03-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-10-11 20:59:19" itemprop="dateModified" datetime="2021-10-11T20:59:19+08:00">2021-10-11</time> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">字数统计:</span> <span class="post-count">9.9k(字)</span> </span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">34(分)</span></span><br><p></p></div></header><div class="post-body" itemprop="articleBody"><h2 id="第三章-数据链路层"><a href="#第三章-数据链路层" class="headerlink" title="第三章 数据链路层"></a>第三章 数据链路层</h2><h3 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a><strong>3.1</strong> <strong>使用点对点信道的数据链路层</strong></h3><p>数据链路层属于计算机网络的低层，数据链路层使用的信道主要有以下两种类型：</p><ul><li><strong>点对点信道</strong>。这种信道使用<strong>一对一</strong>的点对点通信方式。</li><li><strong>广播信道</strong>。这种信道使用<strong>一对多的广播通信方式</strong>，因此过程比较复杂。广播信道上连接的主机很多，因此必须<strong>使用专用的共享信道协议来协调这些主机的数据发送</strong>。</li></ul><p>当我们专心研究数据链路层找那个的问题的时候，在许多情况下我们可以<strong>只关心在协议栈中水平方向的各数据链路层</strong>，于是当主机 H1 向主机 H2 发送数据的时候，我们可以<strong>想象数据就是在数据链路层中从左向右沿着水平方法传送的</strong></p><img src="https://pic4.zhimg.com/80/v2-0308b5261c29ca50c08a410115f8f0c3_720w.jpg" alt="img" style="zoom:67%"><h4 id="3-1-1-数据链路和帧"><a href="#3-1-1-数据链路和帧" class="headerlink" title="3.1.1 数据链路和帧"></a><strong>3.1.1</strong> <strong>数据链路和帧</strong></h4><p><strong><u>链路(link)</u></strong>: 从一个节点到相邻节点的一段物理线路(有线或者无线)，中间没有任何其他的交换结点。</p><ul><li><strong>进行数据通信时，两个计算机之间的通路往往是由许多的链路串接而成的。</strong></li><li><strong>一条链路只是一条通路的一个组成部分。</strong></li></ul><p><strong><u>数据链路(data link)</u></strong>： 除了物理线路外，还必须有通信协议来控制这些数据的传输。<strong>把实现这些协议的硬件和软件加到链路上，就构成了数据链路。</strong></p><ul><li>常用方法是用适配器<strong>（即网卡）</strong>（通过硬件或者软件）来实现相关协议。<ul><li>适配器是一个电路板（或者一个PCMCIA卡），通常包括RAM、DSP芯片、主机总线接口和链路接口。 适配器通常也称为网络接口卡（network interface card, NIC）。</li></ul></li><li><strong>链路层协议的主要部分在适配器中实现，适配器通常包括数据链路层和物理层这两层功能。</strong></li></ul><p>早期数据通信协议曾经叫做<strong>通信规程</strong>，所以在数据链路层中，规程和协议是同义语</p><p><strong><u>帧</u></strong>：<strong>数据链路层传送的是帧。</strong>我们知道在物理层之间传送的是比特流，而在传输媒体上传送的是信号，但有时为了方便，常说，“在某条链路上传送数据帧”。其实这隐含地假定是在数据链路层上来观察问题。</p><p><strong>传输过程</strong></p><p>传输节点的网络层将网络层数据报传递到适配器。该适配器在一个帧内封装数据报，并将该帧传输到通信链路。在另一端，接收适配器收到整个帧，提取出网络层数据报，传递给网络层。</p><p>如果链路层协议提供差错检测，发送适配器设置差错检测比特，接收适配器完成差错检测。</p><p>如果链路层协议提供可靠交付，那么可靠交付的机制（例如序号、定时器、确认）在适配器中实现。</p><p>如果链路层协议提供随机访问，随机访问协议在适配器中实现。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406192622692.png" alt="image-20210406192622692" style="zoom:67%"><h4 id="3-1-2-三个基本问题"><a href="#3-1-2-三个基本问题" class="headerlink" title="3.1.2 三个基本问题"></a><strong>3.1.2</strong> <strong>三个基本问题</strong></h4><h5 id="1-封装成帧"><a href="#1-封装成帧" class="headerlink" title="(1)封装成帧"></a>(1)<strong>封装成帧</strong></h5><p>封装成帧(framing)就是在一段数据的前后分别<strong>添加首部和尾部</strong>，然后就<strong>构成了一个帧</strong>。首部和尾部的<strong>一个重要作用就是进行帧定界。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193714036.png" alt="image-20210406193714036" style="zoom:67%"><p><strong>用控制字符进行帧定界的方法举例</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193843841.png" alt="image-20210406193843841" style="zoom:67%"><p><strong>数据在传输中出现差错时，帧定界符的作用更加明显。</strong></p><blockquote><p>ASCII 码是7位编码，一共可以组成128个不同的 ASCII 码，其中可打印的有95个，不可打印的有33个，请注意，SOH 和 EOT 都是控制字符的名称，他们的十六进制编码分别为 01（二进制是 00000001）和 04（00000100）SOH（或 EOT） 并不是 S，O，H （或 E，O，T）三个字符</p></blockquote><h5 id="2-透明传输"><a href="#2-透明传输" class="headerlink" title="(2)透明传输"></a>(2)<strong>透明传输</strong></h5><p><strong>如果数据中的某个字节的二进制代码恰好和</strong> <strong>SOH</strong> <strong>或</strong> <strong>EOT</strong> <strong>一样，数据链路层就会错误地“找到帧的边界”。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406193952573.png" alt="image-20210406193952573" style="zoom:67%"><p><strong>解决方法：字节填充 (byte stuffing) 或字符填充 (character stuffing)</strong></p><ul><li>发送端的数据链路层在<strong>数据中出现控制字符“SOH”或“EOT”的前面插入一个<em>转义字符“ESC”</em>（其十六进制编码是1B）</strong></li><li><strong>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符</strong></li><li>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。<ul><li>当接收端收到连续的两个转义字符时，就删除其中前面的一个</li></ul></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406194437322.png" alt="image-20210406194437322" style="zoom:50%"><h5 id="3-差错控制"><a href="#3-差错控制" class="headerlink" title="(3)差错控制"></a>(3)差错控制</h5><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210611193713335.png" alt="image-20210611193713335" style="zoom:80%"><p><strong>在传输过程中可能会产生比特差错：1 可能会变成 0 而 0 也可能变成 1。</strong></p><p>在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率 BER (Bit Error Rate)。 误码率与信噪比有很大的关系。 为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</p><p><strong>在数据链路层传送的帧中，广泛使用了循环冗余检验 CRC 的检错技术。</strong></p><p>在发送端，先把数据划分为组。假定每组 k 个比特</p><p>在每组 M（待传送数据） 后面再添加供差错检测用的 n 位冗余码，然后一起发送出去</p><p><strong>冗余码如何计算：</strong></p><ul><li>用二进制的模 2 运算进行 2^n 乘 M 的运算，这相当于在 <strong>M 后面添加 n 个 0</strong></li><li><strong>得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，余数 R 除数 P 少 1 位，即 R 是 n 位</strong></li><li><strong>将余数 R 作为冗余码拼接在数据 M 后面，一起发送出去</strong></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406195426893.png" alt="image-20210406195426893" style="zoom:50%"><p><strong>接收端对收到的每一帧进行 CRC 检验</strong></p><ul><li><p>(1) 若得出的余数 R = 0，则判定这个帧没有差错，就接受 (accept)。</p></li><li><p>(2) 若余数 R ≠ 0，则判定这个帧有差错，就丢弃。</p><p><strong>但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。 只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。</strong></p></li></ul><p>举例：</p><p>现在 k = 6, M = 101001</p><p>设 n = 3, 除数 P = 1101</p><p>被除数是 2^n^M = 101001000</p><p>模 2 运算的结果是：商 Q = 110101，余数 R = 001</p><p>把余数 R 作为冗余码添加在数据 M 的后面发送出去。发送的数据是：2^n^M + R，即：101001001，共 (k + n) 位</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406195917541.png" alt="image-20210406195917541" style="zoom:50%"><blockquote><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406201101904.png" alt="image-20210406201101904" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406201123393.png" alt="image-20210406201123393" style="zoom:67%"><p><strong>模2除法，实际上就是异或，每一位除的结果不影响其它位，即不借位。</strong></p><p>模2除法的步骤：</p><p><u><strong>1、用被除数最高几位对除数做模2减，没有借位。</strong></u></p><p><u><strong>2、够除数位数就商1否则就商0</strong></u></p><p><u><strong>3、一直做到余数的位数小于除数，该余数就是最终结果。（不够n位前面补0）</strong></u></p><p>PS运算中，余数第一位是0可省略，如上。</p></blockquote><p><strong>在数据后面添加上的冗余码称为帧检验序列 FCS (Frame Check Sequence)</strong></p><p>循环冗余检验 CRC 和帧检验序列 FCS <strong>并不等同</strong></p><ul><li>CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码</li><li>FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法</li></ul><blockquote><p>实际中，每个r位的FCS都会对应一个规定好的除数。这也是为什么接收方知道用啥除的原因。</p></blockquote><p><strong>注意：</strong></p><p>仅用循环冗余检验 CRC 差错检测技术只能做到无差错接受 (accept)</p><ul><li>“无差错接受”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”</li><li>也就是说：“<strong>凡是接收端数据链路层接受的帧都没有传输差错</strong>”（有差错的帧就丢弃而不接受） 单纯使用 CRC 差错检测技术不能实现“无差错传输”或“可靠传输”</li></ul><p><strong>应当明确，“无比特差错”与“无传输差错”是不同的概念</strong></p><p>在数据链路层使用 CRC 检验，能够实现无比特差错的传输，但这还不是可靠传输(<strong><u>例如：中途整个帧丢失了怎么办？</u></strong>)</p><p>要做到<strong>“无差错传输”（即发送什么就收到什么）</strong>就必须再加上确认和重传机制</p><p>这一篇中介绍的数据链路层协议都不是可靠传输的协议</p><h3 id="3-2-点对点协议PPP"><a href="#3-2-点对点协议PPP" class="headerlink" title="3.2 点对点协议PPP"></a><strong>3.2</strong> 点对点协议PPP</h3><p><strong>对于点对点的链路，目前使用得最广泛的数据链路层协议是点对点协议 PPP (Point-to-Point Protocol)</strong></p><h4 id="3-2-1PPP-协议的特点"><a href="#3-2-1PPP-协议的特点" class="headerlink" title="3.2.1PPP 协议的特点"></a>3.2.1<strong>PPP</strong> <strong>协议的特点</strong></h4><p><strong>PPP</strong> <strong>协议应满足的需求</strong></p><ul><li><strong>简单</strong> —— 这是首要的要求</li><li><strong>封装成帧</strong> —— 必须规定特殊的字符作为帧定界符</li><li><strong>透明性</strong> —— 必须保证数据传输的透明性</li><li><strong>多种网络层协议</strong> —— 能够在同一条物理链路上同时支持多种网络层协议</li><li><strong>多种类型链路</strong> —— 能够在多种类型的链路上运行</li><li><strong>差错检测</strong> —— 能够对接收端收到的帧进行检测，并立即丢弃有差错的帧</li><li><strong>检测连接状态</strong> —— 能够及时自动检测出链路是否处于正常工作状态</li><li><strong>最大传送单元</strong> —— 必须对每一种类型的点对点链路设置最大传送单元 MTU 的标准默认值，促进各种实现之间的互操作性</li><li><strong>网络层地址协商</strong> —— 必须提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址</li><li><strong>数据压缩协商</strong> —— 必须提供一种方法来协商使用数据压缩算法</li></ul><p><strong>PPP 协议不需要的功能</strong></p><ul><li>纠错</li><li>流量控制</li><li>序号</li><li>多点线路</li><li>半双工或单工链路</li></ul><p><strong>PPP 协议的组成</strong></p><p>PPP 协议有三个组成部分：</p><ul><li>一个将 <strong>IP 数据报封装到串行链路的方法</strong><ul><li>在PPP帧中封装数据、识别帧的开始和结束以及检测帧中差错的方法。</li></ul></li><li><strong>链路控制协议 LCP</strong> (Link Control Protocol)<ul><li><strong>建立、配置、测试数据链路；在链路上<em>协调互连的两端设备每个选项的设置值（如：封帧的格式，分组的大小）</em>，还可进行链路质量管理。</strong></li></ul></li><li><strong>网络控制协议 NCP</strong> (Network Control Protocol)<ul><li>PPP允许同时使用多个网络层协议，对于所支持的每一个网络层协议都有一个不同的网络控制协议（NCP），用来建立和配置不同的网络层协议。</li></ul></li></ul><h4 id="3-2-2-PPP-协议的帧格式"><a href="#3-2-2-PPP-协议的帧格式" class="headerlink" title="3.2.2 PPP 协议的帧格式"></a>3.2.2 PPP 协议的帧格式</h4><ul><li>PPP 帧的首部和尾部分别为 4 个字段和 2 个字段</li><li>标志字段 F = <strong>0x7E</strong> （符号“0x”表示后面的字符是用十六进制表示。十六进制的 7E 的二进制表示是 <strong>01111110</strong>）</li><li>地址字段 A 只置为 0xFF。地址字段实际上并不起作用</li><li>控制字段 C 通常置为 0x03</li><li>PP 是<strong>面向字节</strong>的，所有的 PPP <strong>帧的长度</strong>都是<strong>整数字节</strong></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406211537007.png" alt="image-20210406211537007" style="zoom:50%"><p>PPP 有一个 2 个字节的协议字段，其值：</p><ul><li>若为 0x0021，则信息字段就是 IP 数据报。</li><li>若为 0x8021，则信息字段是网络控制数据。</li><li>若为 0xC021，则信息字段是 PPP 链路控制数据。</li><li>若为 0xC023，则信息字段是鉴别数据。</li></ul><h5 id="1-PPP-协议解决透明传输的问题"><a href="#1-PPP-协议解决透明传输的问题" class="headerlink" title="(1)PPP 协议解决透明传输的问题"></a>(1)PPP 协议解决透明传输的问题</h5><ul><li>当 PPP 用在<strong>同步</strong>传输链路时，协议规定<strong>采用硬件来完成比特填充</strong>（和 HDLC 的做法一样）</li><li>当 PPP 用在<strong>异步</strong>传输时，就使用一种特殊的<strong>字符填充法</strong></li></ul><h6 id="字符填充"><a href="#字符填充" class="headerlink" title="字符填充"></a>字符填充</h6><p>将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D, 0x5E)</p><p>若信息字段中出现一个 0x7D 的字节<strong>(即出现了和转义字符一样的比特组合),</strong> 则将其转变成为 2 字节序列 (0x7D, 0x5D)</p><p>若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406211933432.png" alt="image-20210406211933432" style="zoom:50%"><h6 id="零比特填充"><a href="#零比特填充" class="headerlink" title="零比特填充"></a>零比特填充</h6><p>PPP 协议用在 SONET/SDH 链路时，使用同步传输（一连串的比特连续传送）。这时 PPP 协议采用零比特填充方法来实现透明传输</p><p><strong>在发送端，只要发现有 5 个连续 1，则立即填入一个 0</strong></p><p><strong>接收端对帧中的比特流进行扫描。每当发现 5 个连续1时，就把这 5 个连续 1 后的一个 0 删除</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406212506012.png" alt="image-20210406212506012" style="zoom:50%"><blockquote><p><a href="https://juejin.cn/post/6844904084525301773" target="_blank" rel="noopener">理解字节填充和零比特填充</a></p></blockquote><p><strong>不提供使用序号和确认的可靠传输</strong></p><p>PPP 协议之所以<strong>不使用</strong>序号和确认机制是出于以下的考虑：</p><p>在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理</p><p>在因特网环境下，PPP 的信息字段放入的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的</p><p>帧检验序列 FCS 字段可保证无差错接受</p><h4 id="3-2-3PPP协议的工作状态"><a href="#3-2-3PPP协议的工作状态" class="headerlink" title="3.2.3PPP协议的工作状态"></a>3.2.3PPP协议的工作状态</h4><p>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接</p><p>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）</p><p>这些分组及其响应选择一些 PPP 参数，并进行网络层配置，NCP 给新接入的 PC 机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机</p><p>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接</p><p><strong>可见，PPP 协议已不是纯粹的数据链路层的协议，它还包含了物理层和网络层的内容</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406213232733.png" alt="image-20210406213232733" style="zoom:67%"><h3 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a><strong>3.3</strong> 使用广播信道的数据链路层</h3><p><strong>本章研究的是在一个局域网内，分组怎样从一台主机传送到另一台主机（不经过路由器），这属于数据链路层的范畴。</strong></p><h4 id="3-3-1局域网的数据链路层"><a href="#3-3-1局域网的数据链路层" class="headerlink" title="3.3.1局域网的数据链路层"></a>3.3.1<strong>局域网的数据链路层</strong></h4><p><strong>局域网最主要的特点是：</strong></p><ul><li>网络为一个单位所拥有</li><li>地理范围和站点数目均有限</li></ul><p><strong>局域网具有如下主要优点：</strong></p><ul><li>具有广播功能，从一个站点可很方便地访问全网，局域网上的主机可共享连接在局域网上的各种硬件和软件资源</li><li>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变</li><li>提高了系统的可靠性、可用性和残存性</li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406213838809.png" alt="image-20210406213838809" style="zoom:50%"><h5 id="1-媒体共享技术"><a href="#1-媒体共享技术" class="headerlink" title="(1)媒体共享技术"></a>(1)<strong>媒体共享技术</strong></h5><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406214012390.png" alt="image-20210406214012390" style="zoom:50%"><ul><li><p><strong>静态划分信道</strong></p><ul><li>–<strong>频分复用</strong></li><li>–<strong>时分复用</strong></li><li>–<strong>波分复用</strong></li><li>–<strong>码分复用</strong></li></ul></li><li><p><strong>动态媒体接入控制（多点接入）</strong></p><ul><li>–<strong>受控接入 ，用户不能随机发送信息，如令牌环局域网。</strong></li><li>–<strong>随机接入：所有用户可随机发送信息，可能存在冲突问题，如以太网。</strong></li></ul></li></ul><h5 id="2-以太网的两个标准"><a href="#2-以太网的两个标准" class="headerlink" title="(2)以太网的两个标准"></a>(2)以太网的两个标准</h5><p><strong>DIX Ethernet V2</strong> 是世界上第一个局域网产品（以太网）的规约</p><p><strong>IEEE 802.3</strong> 是第一个 IEEE 的以太网标准</p><ul><li><strong>DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别</strong>，因此可以将 802.3 局域网简称为“以太网”</li><li><strong>严格说来，“以太网”应当是指符合 DIX Ethernet V2 标准的局域网</strong></li></ul><h5 id="3-数据链路层的两个子层"><a href="#3-数据链路层的两个子层" class="headerlink" title="(3)数据链路层的两个子层"></a><strong>(3)数据链路层的两个子层</strong></h5><p>为了使数据链路层能更好地适应多种局域网标准，IEEE 802 委员会就将局域网的数据链路层拆成两个子层：</p><ul><li><strong>逻辑链路控制 LLC</strong> (Logical Link Control)子层</li><li><strong>媒体接入控制 MAC</strong> (Medium Access Control)子层</li></ul><p><strong>与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关</strong></p><p><strong>不管采用何种协议的局域网，对 LLC 子层来说都是透明的</strong></p><p><strong>由于 TCP/IP 体系经常使用的局域网是 DIX Ethernet V2 ，因此现在 802 委员会制定的逻辑链路控制子层 LLC（即 802.2 标准）作用已经不大。很多厂商生产的适配器上仅装有 MAC 协议而没有 LLC 协议。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406214309230.png" alt="image-20210406214309230" style="zoom:50%"><h5 id="4-适配器的作用"><a href="#4-适配器的作用" class="headerlink" title="(4)适配器的作用"></a>(4)适配器的作用</h5><p>网络接口板又称为<strong>通信适配器</strong> (adapter) 或<strong>网络接口卡</strong> NIC (Network Interface Card)，或<strong>“网卡”</strong></p><p>适配器的重要功能：</p><ul><li><strong>进行串行/并行转换</strong></li><li><strong>对数据进行缓存</strong></li><li><strong>在计算机的操作系统安装设备驱动程序</strong></li><li><strong>实现以太网协议</strong></li></ul><h4 id="3-3-2CSMA-CD协议"><a href="#3-3-2CSMA-CD协议" class="headerlink" title="3.3.2CSMA/CD协议"></a>3.3.2CSMA/CD协议</h4><h5 id="1-以太网的广播方式发送"><a href="#1-以太网的广播方式发送" class="headerlink" title="(1)以太网的广播方式发送"></a>(1)以太网的广播方式发送</h5><p><strong>最初的以太网是将许多计算机都连接到一根总线上。</strong></p><p>总线的特点：当一台计算机发送数据时，总线上的所有计算机都能检测到这个数据。即：广播通信方式。</p><p><strong>但大多数情况，并不希望进行一对多的广播通信，而是在总线上实现一对一的通信。</strong></p><p><strong><em>方法：每一台计算机的适配器都拥有一个与其他适配器不同的地址，在发送数据帧时，在帧的首部写明接收方的地址。</em></strong></p><p><strong><u>总线也有缺点。若多台计算机或多个站点同时发送时，会产生发送碰撞或冲突，导致发送失败。</u></strong></p><h5 id="2-以太网采取两种重要的措施-一"><a href="#2-以太网采取两种重要的措施-一" class="headerlink" title="(2)以太网采取两种重要的措施(一)"></a>(2)以太网采取两种重要的措施(一)</h5><p><strong>① 采用较为灵活的无连接的工作方式</strong></p><ul><li>不必先建立连接就可以直接发送数据</li><li>对发送的数据帧不进行编号，也不要求对方发回确认</li><li><strong>这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的</strong></li></ul><blockquote><p>以太网提供的服务:</p><p><strong>以太网提供的服务是不可靠的交付，即尽最大努力的交付。</strong></p><p>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。<strong>差错的纠正由高层来决定。</strong></p><p>如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。</p></blockquote><p><strong>② 以太网发送的数据都使用曼彻斯特 (Manchester) 编码</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210406215435896.png" alt="image-20210406215435896" style="zoom:50%"><ul><li>曼彻斯特编码缺点是：它所占的频带宽度比原始的基带信号增加了一倍</li></ul><blockquote><p>以太网提供的服务:</p><p><strong><u>CSMA/CD 表示 Carrier Sense Multiple Access with Collision Detection。</u></strong></p><p><strong>“多点接入”指许多计算机以多点接入的方式连接在一根总线上，表明这是<em>总线型网络。</em></strong></p><p>“载波监听”是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机发送的数据信号，即:是否有其他计算机在发送数据 。如果有的话，则暂时不要发送数据，以免发生碰撞。</p><p>总线上并没有什么“载波”。因此， <strong>“载波监听”就是用电子技术<em>检测总线上有没有其他计算机发送的数据信号。</em></strong></p></blockquote><h5 id="3-碰撞检测"><a href="#3-碰撞检测" class="headerlink" title="(3)碰撞检测"></a>(3)碰撞检测</h5><p>由于<strong>电磁波在总线上的传播速率是有限的</strong>，当某个站监听到总线是空闲时，也可能总线并非真正是空闲的</p><ul><li>A 向 B 发出的信息，要经过一定的时间后才能传送到 B</li><li>B 若在 A 发送的信息到达 B 之前发送自己的帧 (因为这时 B 的载波监听检测不到 A 所发送的信息)，<strong>则必然要在某个时间和 A 发送的帧发生碰撞</strong></li><li>碰撞的结果是两个帧都变得无用</li></ul><p>所以需要在<strong>发送期间进行碰撞检测，以检测冲突</strong></p><p><strong>“碰撞检测”就是计算机边发送数据边检测信道上的信号电压大小。</strong></p><p>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（<strong>互相叠加</strong>）。 当一个站检测到的信号电压摆动值<strong>超过一定的门限值时</strong>，就认为<strong>总线上至少有两个站同时在发送数据，表明产生了碰撞</strong>。</p><p><strong>所谓“碰撞”就是发生了冲突。因此“碰撞检测”也称为“冲突检测”</strong></p><p>每一个正在发送数据的站，<strong>一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送</strong></p><p>使用 CSMA/CD 协议的以太网<strong>不能进行全双工通信而只能进行双向交替通信（半双工通信），因为了碰撞了帧就无效了</strong>。</p><p>当发送数据的站<strong>一旦发现发生了碰撞时</strong>：</p><ul><li>(1) <strong>立即停止发送数据</strong>；</li><li>(2) 再继续发送若干比特的<strong>人为干扰信号</strong> (jamming signal)，以便让所有用户都知道现在<strong>已经发生了碰撞</strong>。</li></ul><h6 id="争用期"><a href="#争用期" class="headerlink" title="争用期"></a><strong>争用期</strong></h6><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613120632798.png" alt="image-20210613120632798" style="zoom:67%"><blockquote><p>2τ-δ的来源入上，（τ-δ/2）乘二倍。</p></blockquote><p>最先发送数据帧的站，在发送数据帧后<strong>至多经过时间 2τ（两倍的端到端单程时延）就可知道发送的数据帧是否遭受了碰撞</strong>。</p><p><strong><em>以太网的端到端往返时延 2τ 称为争用期，或碰撞窗口。</em></strong></p><p>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p><h6 id="截断二进制指数退避算法-truncated-binary-exponential-type"><a href="#截断二进制指数退避算法-truncated-binary-exponential-type" class="headerlink" title="截断二进制指数退避算法 (truncated binary exponential type)"></a>截断二进制指数退避算法 (truncated binary exponential type)</h6><p><strong>如果检测到碰撞了就直接重发，就会导致重新造成碰撞。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613121031804.png" alt="image-20210613121031804" style="zoom:67%"><p>发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407082910042.png" alt="image-20210407082910042" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210613121232824.png" alt="image-20210613121232824" style="zoom:67%"><h6 id="争用期的长度和最小帧长"><a href="#争用期的长度和最小帧长" class="headerlink" title="争用期的长度和最小帧长"></a><strong>争用期的长度和最小帧长</strong></h6><p><strong><em>以太网取 51.2 μs 为争用期的长度。</em></strong></p><p><strong><em>对于 10 Mb/s 以太网，在争用期内可发送512 bit，即 64 字节。</em></strong></p><p><strong><em>以太网在发送数据时，若前 64 字节没有发生冲突，则后续的数据就不会发生冲突。</em></strong></p><p><strong>最小帧长=数据传输速率×2τ</strong></p><p>如果发生冲突，就一定是在发送的前 64 字节之内。 由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。</p><p><strong>以太网规定了最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧。</strong></p><h6 id="强化碰撞"><a href="#强化碰撞" class="headerlink" title="强化碰撞"></a><strong>强化碰撞</strong></h6><p>当发送数据的站一旦发现发生了碰撞： 立即停止发送数据；</p><p>继续发送32比特或者48比特的人为干扰信号(jamming signal)；</p><p>jamming signal的目的：强化碰撞，<strong>使冲突的时间足够长，以便让所有用户都知道现在已经发生了碰撞。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407083445537.png" alt="image-20210407083445537" style="zoom:50%"><p>使用 CSMA/CD 协议的以太网不能进行全双工通信而只能进行双向交替通信（半双工通信）。</p><p>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。</p><p>这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。</p><h5 id="4-CSMA-CD协议的要点"><a href="#4-CSMA-CD协议的要点" class="headerlink" title="(4)CSMA/CD协议的要点"></a>(4)CSMA/CD协议的要点</h5><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084017684.png" alt="image-20210407084017684" style="zoom:67%"><h4 id="3-3-3使用集线器的星形拓扑"><a href="#3-3-3使用集线器的星形拓扑" class="headerlink" title="3.3.3使用集线器的星形拓扑"></a>3.3.3使用集线器的星形拓扑</h4><p>传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线</p><p>采用双绞线的以太网采用星形拓扑，在<strong>星形的中心</strong>则增加了一种可靠性非常高的设备，叫做<strong>集线器 (hub)</strong></p><p>传统以太网使用同轴电缆，采用总线形拓扑结构</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084136061.png" alt="image-20210407084136061" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084149687.png" alt="image-20210407084149687" style="zoom:67%"><p>集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行</p><p><strong>使用集线器的以太网在逻辑上仍是一个总线网，</strong>各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线</p><p>集线器很像一个多接口的转发器，工作在物理层</p><p>集线器采用了专门的芯片，进行自适应串音回波抵消，减少了近端串音</p><blockquote><p>转发器并非简单地放大信号（放大信号的同时，也会放大噪声），而是将电信号解释为0和1，接着重新生成新的强信号发送到其他电缆。<strong>转发器并不解释比特的含义，只是查看并重新生成电信号，所以工作在物理层。</strong></p></blockquote><h4 id="3-3-4以太网的信道利用率"><a href="#3-3-4以太网的信道利用率" class="headerlink" title="3.3.4以太网的信道利用率"></a>3.3.4以太网的信道利用率</h4><h5 id="1-参数-a"><a href="#1-参数-a" class="headerlink" title="(1)参数 a"></a>(1)参数 a</h5><p>多个站在以太网上同时工作就可能会发生碰撞</p><p>当发生碰撞时，信道资源实际上是被浪费了。因此，当扣除碰撞所造成的信道损失后，<strong>以太网总的信道利用率并不能达到 100%</strong></p><p>假设 τ是以太网单程端到端传播时延。则争用期长度为 2τ ，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号</p><p>设帧长为 L (bit)，数据发送速率为 C (bit/s)，则帧的发送时间为 T0 = L/C (s)</p><p>一个站在发送帧时出现了碰撞。经过一个争用期 2τ 后，可能又出现了碰撞。这样经过若干个争用期后，一个站发送成功了。假定发送帧需要的时间是 T0</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084613113.png" alt="image-20210407084613113" style="zoom:67%"><p>注意到，成功发送一个帧需要占用信道的时间是 T0 + τ ，比这个帧的发送时间要多一个单程端到端时延 τ</p><p><strong>这是因为当一个站发送完最后一个比特时，这个比特还要在以太网上传播</strong></p><p>在最极端的情况下，发送站在传输媒体的一端，而比特在媒体上传输到另一端所需的时间是 τ</p><p>要提以太网的信道利用率，就必须减小 τ 与 T0 之比</p><p>在以太网中定义了<strong>参数 a</strong> ，它是以太网单程端到端时延 τ 与帧的发送时间 T0 之比：</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407084951486.png" alt="image-20210407084951486"></p><p><strong>为提高利用率，以太网的参数 a 的值应当尽可能小些</strong></p><p>对以太网参数 a 的要求是：</p><ul><li>当数据率一定时，以太网的连线的长度受到限制，否则 τ 的数值会太大</li><li>以太网的帧长不能太短，否则 T0 的值会太小，使 a 值太大</li></ul><h5 id="2-信道利用率的最大值-Smax"><a href="#2-信道利用率的最大值-Smax" class="headerlink" title="(2)信道利用率的最大值 Smax"></a>(2)信道利用率的最大值 Smax</h5><p>在理想化的情况下，以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA/CD，而是需要使用一种特殊的调度方法），即总线一旦空闲就有某一个站立即发送数据</p><p>发送一帧占用线路的时间是 T0 + τ ，而帧本身的发送时间是 T0。于是，我们可计算出理想情况下的极限信道利用率 Smax 为：</p><p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407085152677.png" alt="image-20210407085152677"></p><ul><li><strong>只有当参数 a 远小于 1 才能得到尽可能高的极限信道利用率</strong></li><li>据统计，当以太网的利用率达到 30% 时就已经处于重载的情况。很多的网络容量被网上的碰撞消耗掉了</li></ul><h4 id="3-3-5以太网的-MAC-层"><a href="#3-3-5以太网的-MAC-层" class="headerlink" title="3.3.5以太网的 MAC 层"></a>3.3.5以太网的 MAC 层</h4><p>在局域网中，硬件地址又称为物理地址，或 MAC 地址。 802 标准所说的“地址”严格地讲应当是每一个站的“名字”或标识符。</p><h5 id="1-MAC地址组成"><a href="#1-MAC地址组成" class="headerlink" title="(1)MAC地址组成"></a>(1)MAC地址组成</h5><ul><li>IEEE 802 标准规定 MAC 地址字段可采用 6 字节 ( 48位) 或 2 字节 ( 16 位) 这两种中的一种</li><li>IEEE 的<strong>注册管理机构 RA 负责向厂家分配地址字段 6 个字节中的前三个字节 (即高位 24 位)</strong>，称为组织唯一标识符</li><li>地址字段 6 个字节中的后<strong>三个字节 (即低位 24 位) 由厂家自行指派</strong>，称为扩展唯一标识符，<strong>必须保证生产出的适配器没有重复地址</strong></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407085839310.png" alt="image-20210407085839310" style="zoom:67%"><p><strong>生产适配器时，6 字节的 MAC 地址已被固化在适配器的 ROM，因此，MAC 地址也叫做硬件地址 (hardware address) 或物理地址。</strong></p><h6 id="单站地址，组地址，广播地址"><a href="#单站地址，组地址，广播地址" class="headerlink" title="单站地址，组地址，广播地址"></a>单站地址，组地址，广播地址</h6><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090016548.png" alt="image-20210407090016548" style="zoom:50%"><h6 id="全球管理与本地管理"><a href="#全球管理与本地管理" class="headerlink" title="全球管理与本地管理"></a><strong>全球管理与本地管理</strong></h6><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090044992.png" alt="image-20210407090044992" style="zoom:50%"><h6 id="适配器检查MAC"><a href="#适配器检查MAC" class="headerlink" title="适配器检查MAC"></a>适配器检查MAC</h6><p>所有的适配器都至少能够识别前两种帧，即能够识别<strong>单播地址和广播地址</strong></p><p>以混杂方式 (promiscuous mode) 工作的以太网适配器只要<strong>“听到”有帧在以太网上传输就都接收下来</strong></p><h5 id="2-MAC-帧的格式"><a href="#2-MAC-帧的格式" class="headerlink" title="(2)MAC 帧的格式"></a>(2)MAC 帧的格式</h5><h6 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h6><p>​ 常用的以太网 MAC 帧格式有两种标准：</p><ul><li>DIX Ethernet V2 标准（常用）</li><li>IEEE 的 802.3 标准</li></ul><p><strong>最常用的 MAC 帧是以太网 V2 的格式。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090509858.png" alt="image-20210407090509858" style="zoom:67%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407090613941.png" alt="image-20210407090613941" style="zoom:67%"><h6 id="无效的-MAC-帧"><a href="#无效的-MAC-帧" class="headerlink" title="无效的 MAC 帧"></a><strong>无效的</strong> <strong>MAC</strong> <strong>帧</strong></h6><ul><li>数据字段的长度与长度字段的值不一致</li><li>帧的长度不是整数个字节</li><li>用收到的帧检验序列 FCS 查出有差错</li><li>数据字段的长度不在 46 ~ 1500 字节之间</li><li>有效的 MAC 帧长度为 64 ~ 1518 字节之间</li></ul><p><strong>对于检查出的无效</strong> <strong>MAC</strong> <strong>帧就简单地丢弃。以太网不负责重传丢弃的帧。</strong></p><h6 id="帧间最小间隔"><a href="#帧间最小间隔" class="headerlink" title="帧间最小间隔"></a>帧间最小间隔</h6><p><strong>帧间最小间隔为9.6 μs ，相当于96比特时间。</strong></p><p><strong>一个站在检测到总线开始空闲后，还要等待 9.6 μs 才能再次发送数据。</strong></p><p><strong>目的：使刚刚收到数据帧的站来得及清理接收缓存，做好接收下一帧的准备。</strong></p><h3 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4 扩展的以太网"></a><strong>3.4</strong> 扩展的以太网</h3><h4 id="3-4-1在物理层扩展以太网"><a href="#3-4-1在物理层扩展以太网" class="headerlink" title="3.4.1在物理层扩展以太网"></a>3.4.1在物理层扩展以太网</h4><p><strong>使用光纤扩展</strong></p><ul><li>主机使用光纤（通常是一对光纤）和一对光纤调制解调器连接到集线器。</li><li>很容易使主机和几公里以外的集线器相连接</li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091113480.png" alt="image-20210407091113480" style="zoom:67%"><p><strong>使用集线器扩展</strong>：将多个以太网段连成更大的、多级星形结构的以太网</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091148089.png" alt="image-20210407091148089" style="zoom:50%"><p><strong>优点</strong></p><ul><li>使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信</li><li>扩大了以太网覆盖的地理范围</li></ul><p><strong>缺点</strong></p><ul><li><strong>碰撞域增大了，但总的吞吐量并未提高</strong></li><li>如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来</li></ul><p><strong>补充</strong></p><ul><li>碰撞域（collision domain）又称为冲突域，是指网络中一个站点发出的帧会与其他站点发出的帧产生碰撞或冲突的那部分网络<br>碰撞域越大，发生碰撞的概率越高</li></ul><h4 id="3-4-2在数据链路层扩展以太网"><a href="#3-4-2在数据链路层扩展以太网" class="headerlink" title="3.4.2在数据链路层扩展以太网"></a>3.4.2在数据链路层扩展以太网</h4><p>扩展以太网更常用的方法是在数据链路层进行</p><p>早期使用网桥，现在使用以太网交换机</p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091255442.png" alt="image-20210407091255442" style="zoom:67%"><ul><li>网桥工作在数据链路层</li><li>它根据 MAC 帧的目的地址对收到的帧进行转发和过滤</li><li>==<strong>当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口，或把它丢弃</strong>==</li></ul><h5 id="以太交换机的特点"><a href="#以太交换机的特点" class="headerlink" title="以太交换机的特点"></a><strong>以太交换机的特点</strong></h5><ul><li><p>以太网交换机实质上就是一个<strong>多接口的网桥</strong></p></li><li><ul><li>通常都有十几个或更多的接口</li></ul></li><li><p>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都<strong>工作在全双工方式</strong></p></li><li><p>以太网交换机<strong>具有并行性</strong></p></li><li><ul><li>能同时连通多对接口，使多对主机能同时通信</li></ul></li></ul><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407091559894.png" alt="image-20210407091559894" style="zoom:50%"><ul><li><strong>独占传输媒体的带宽</strong><ul><li>对于传统的 10 Mb/s 的共享式以太网，若共有 N 个用户，则每个用户占有的平均带宽只有总带宽(10 Mb/s)的 N 分之一。</li><li>使用以太网交换机时，虽然在每个接口到主机的带宽还是 10 Mb/s，但由于一个用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽，因此对于拥有 N 个接口的交换机的总容量为 N10 Mb/s。这正是交换机的最大优点。</li></ul></li></ul><blockquote><p>总线以太网使用CSMA/CD协议，以半双工方式工作。但以太网交换机不使用共享总线，没有碰撞问题。因此不使用CSMA/CD协议，而是以全双工方式工作。</p><p>那交换式以太网为什么还叫以太网呢？</p><p>因为帧结构不变，仍然采用以太网帧结构。</p></blockquote><p><strong>以太网交换机的优点</strong></p><ul><li>从共享总线以太网转到交换式以太网时，所有接入设备的软件和硬件、适配器等都不需要做任何改动。</li><li>以太网交换机一般都具有多种速率的接口，方便了各种不同情况的用户。</li></ul><h5 id="交换机的交换方式"><a href="#交换机的交换方式" class="headerlink" title="交换机的交换方式"></a><strong>交换机的交换方式</strong></h5><p><strong>存储转发方式</strong></p><ul><li>把整个数据帧<strong><em>先缓存</em></strong>后再进行处理。</li></ul><p><strong>直通 (cut-through) 方式</strong></p><ul><li>接收数据帧的同时就<strong><em>立即</em>按数据帧的目的 MAC 地址决定该帧的<em>转发</em>接口，因而提高了帧的转发速度。</strong></li><li>缺点是它不检查差错就直接将帧转发出去，因此<strong>有可能也将一些无效帧转发给其他的站</strong>。</li></ul><h5 id="交换机的自学习算法-处理收到的帧和建立转发表"><a href="#交换机的自学习算法-处理收到的帧和建立转发表" class="headerlink" title="交换机的自学习算法 处理收到的帧和建立转发表"></a>交换机的自学习算法 处理收到的帧和建立转发表</h5><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092608709.png" alt="image-20210407092608709" style="zoom:50%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092616001.png" alt="image-20210407092616001" style="zoom:50%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092626399.png" alt="image-20210407092626399" style="zoom:50%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092634898.png" alt="image-20210407092634898" style="zoom:50%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210407092649842.png" alt="image-20210407092649842" style="zoom:50%"><p>在交换机的转发表中写入的信息除了地址和接口外，还有帧进入该交换机的时间。</p><p>因为以太网的拓扑可能经常会发生变化，站点也可能会更换适配器（即改变了站点的地址）。</p><p>把每个帧到达交换机的时间登记下来，就可以在转发表中只保留网络拓扑的最新状态信息。这样就使得交换机中的转发表能反映当前网络的最新拓扑状态。</p><blockquote><p><strong><u>以太网交换机实质上就是一个多接口的网桥</u></strong></p><p>这里我们是以以太网交换机为例，若以网桥为基础开始介绍，则接口只有1、2，不同的网桥,自左到右为1 2 1 2 1 2</p><p>若不同网桥有不同的机器，通过不同的网桥传达信息，若表中无此信息，则会通过广播传送给各个网桥（<strong>只要本网桥中找不到目的地址，就会广播，而网桥接口很少，广播次数会很多。</strong>）</p></blockquote><p>总结：</p><p>以太网交换机运行<strong>自学习算法自动维护交换表</strong></p><ul><li>交换机收到一帧后先进行自学习。查找交换表中与收到帧的源地址有无相匹配的项目。</li><li>如没有，就在交换表中增加一个项目（源地址、进入的接口和有效时间）。</li><li>如有，则把原有的项目进行更新（进入的接口或有效时间）。</li><li>转发帧。查找交换表中与收到帧的目的地址有无相匹配的项目。</li><li>如没有，则向所有其他接口（进入的接口除外）转发。</li><li>如有，则按交换表中给出的接口进行转发。</li><li>若交换表中给出的接口就是该帧进入交换机的接口，则应丢弃这个帧（因为这时不需要经过交换机进行转发）。</li></ul><p><strong>以太网交换机的这种自学习方法使得以太网交换机能够即插即用，不必人工进行配置，因此非常方便。</strong></p><h6 id="回路和生成树算法"><a href="#回路和生成树算法" class="headerlink" title="回路和生成树算法"></a>回路和生成树算法</h6><p><strong>在网络拓扑图中，你能找到一个回路，比如多个交换机用网线连成一个圈，这样数据可以从原始交换机出发后，还能被转发回原始交换机。</strong></p><p><strong>互连在一起的交换机在进行彼此通信后，就能找出原来的网络拓扑的一个子集。</strong></p><p><strong>在这个子集里，整个连通的网络中不存在回路，即在任何两个站之间只有一条路径。为了避免产生转发的帧在网络中不断地兜圈子，我们使用生成树算法（Kruskal(克鲁斯卡尔)算法等）</strong></p><h4 id="3-4-3虚拟局域网"><a href="#3-4-3虚拟局域网" class="headerlink" title="3.4.3虚拟局域网"></a>3.4.3虚拟局域网</h4><p><strong>网桥和交换机只能分割冲突域，不能分割广播域。</strong></p><p><strong>虚拟局域网 VLAN技术可以分割广播域。</strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104352387.png" alt="image-20210412104352387" style="zoom:60%"> <img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104456199.png" alt="image-20210412104456199" style="zoom:50%"><p>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)</p><p>IEEE 802.1Q 对虚拟局域网 VLAN 的定义：</p><ul><li>虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同- 的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN</li></ul><p>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网</p><p>由于虚拟局域网是用户和网络资源的逻辑组合，因此可按照需要将有关设备和资源非常方便地重新组合，使用户从不同的服务器或数据库中存取所需的资源</p><ul><li><strong>10 台计算机划分为三个虚拟局域网： VLAN1, VLAN2 和 VLAN3</strong></li><li><strong>每个虚拟局域网是一个广播域，VLAN1, VLAN2 和 VLAN3 是三个不同的广播域</strong></li><li><strong>当 B1 向 VLAN2 工作组内成员发送数据时，工作站 B2 和 B3 将会收到其广播的信息</strong></li><li><strong>B1 发送数据时，VLAN1 和 VLAN3 中的工作站 A1，A2 和 C1 等都不会收到 B1 发出的广播信息</strong></li><li><strong>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息 (即“广播风暴”) 而引起性能恶化。</strong></li></ul><p><strong>虚拟局域网使用的以太网帧格式</strong></p><p>虚拟局域网协议允许<strong>在以太网的帧格式中插入一个 4 字节的标识符，称为 VLAN 标记(tag)</strong>，用来<strong><em>指明发送该帧的工作站属于哪一个虚拟局域网。</em></strong></p><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/image-20210412104618267.png" alt="image-20210412104618267" style="zoom:70%"><p><strong>虚拟局域网（VLAN）技术具有以下主要优点：</strong></p><ul><li>改善了性能</li><li>简化了管理</li><li>降低了成本</li><li>改善了安全性</li></ul><h3 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a><strong>3.5</strong> 高速以太网</h3><h4 id="100BASE-T-以太网"><a href="#100BASE-T-以太网" class="headerlink" title="100BASE-T 以太网"></a>100BASE-T 以太网</h4><p>速率达到或超过 100 Mb/s 的以太网称高速以太网。</p><p>100BASE-T 是在双绞线上传送 100 Mb/s 基带信号的星型拓扑以太网又称为快速以太网( Fast Ethernet )。</p><p>IEEE802.3u</p><h4 id="吉比特以太网"><a href="#吉比特以太网" class="headerlink" title="吉比特以太网"></a>吉比特以太网</h4><p>允许在 1 Gb/s 下全双工和半双工两种方式工作。</p><p>在半双工方式下使用 CSMA/CD 协议（全双工方式不需要使用 CSMA/CD 协议）。</p><p>使用 802.3 协议规定的帧格式。</p><p>与 10BASE-T 和 100BASE-T 技术向后兼容。</p></div><div><div><div style="text-align:center;color:#555;font-size:14px">-----------------------本文结束 <i class="fa fa-heart"></i> 感谢阅读-----------------------</div></div></div><div><div id="reward-container"><div>坚持原创技术分享，您的支持将鼓励我继续创作！恰饭^.^~</div><button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214611.png" alt="峻源 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/20190826214431.png" alt="峻源 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>峻源</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://lyxf2000.github.io/posts/aaf5fde3/" title="计算机网络【三】">http://lyxf2000.github.io/posts/aaf5fde3/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/e7eb5eb1/" rel="next" title="计算机网络【二】"><i class="fa fa-chevron-left"></i> 计算机网络【二】</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/1dd8e486/" rel="prev" title="计算机网络【四】">计算机网络【四】 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NjM0NC8yMjg1NQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" src="https://lyxf2000-1259802619.cos.ap-beijing.myqcloud.com/avatar.gif" alt="峻源"></a><p class="site-author-name" itemprop="name">峻源</p><div class="site-description motion-element" itemprop="description">乐于心，乐与心，乐之屿，心扉间</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">122</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:1194320636@qq.com" title="QE-Mail &rarr; mailto:1194320636@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QE-Mail</a> </span><span class="links-of-author-item"><a href="https://music.163.com/#/playlist?id=699716432" title="CloudMusic &rarr; https://music.163.com/#/playlist?id=699716432" rel="noopener" target="_blank"><i class="fa fa-fw fa-music"></i>CloudMusic</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="https://www.baidu.com/" rel="noopener" target="_blank">百度</a></li><li class="links-of-blogroll-item"><a href="https://www.google.com/?hl=zh_CN" title="https://www.google.com/?hl=zh_CN" rel="noopener" target="_blank">谷歌</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/" title="https://www.zhihu.com/" rel="noopener" target="_blank">知乎</a></li><li class="links-of-blogroll-item"><a href="https://juejin.im/" title="https://juejin.im/" rel="noopener" target="_blank">掘金</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="https://github.com/" rel="noopener" target="_blank">github</a></li><li class="links-of-blogroll-item"><a href="https://www.luogu.org/" title="https://www.luogu.org/" rel="noopener" target="_blank">洛谷</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#第三章-数据链路层"><span class="nav-number">1.</span> <span class="nav-text">第三章 数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-使用点对点信道的数据链路层"><span class="nav-number">1.1.</span> <span class="nav-text">3.1 使用点对点信道的数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1-数据链路和帧"><span class="nav-number">1.1.1.</span> <span class="nav-text">3.1.1 数据链路和帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2-三个基本问题"><span class="nav-number">1.1.2.</span> <span class="nav-text">3.1.2 三个基本问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-封装成帧"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">(1)封装成帧</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-透明传输"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">(2)透明传输</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-差错控制"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">(3)差错控制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-点对点协议PPP"><span class="nav-number">1.2.</span> <span class="nav-text">3.2 点对点协议PPP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1PPP-协议的特点"><span class="nav-number">1.2.1.</span> <span class="nav-text">3.2.1PPP 协议的特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-2-PPP-协议的帧格式"><span class="nav-number">1.2.2.</span> <span class="nav-text">3.2.2 PPP 协议的帧格式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-PPP-协议解决透明传输的问题"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">(1)PPP 协议解决透明传输的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#字符填充"><span class="nav-number">1.2.2.1.1.</span> <span class="nav-text">字符填充</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#零比特填充"><span class="nav-number">1.2.2.1.2.</span> <span class="nav-text">零比特填充</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-3PPP协议的工作状态"><span class="nav-number">1.2.3.</span> <span class="nav-text">3.2.3PPP协议的工作状态</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-使用广播信道的数据链路层"><span class="nav-number">1.3.</span> <span class="nav-text">3.3 使用广播信道的数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1局域网的数据链路层"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.3.1局域网的数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-媒体共享技术"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">(1)媒体共享技术</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-以太网的两个标准"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">(2)以太网的两个标准</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-数据链路层的两个子层"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">(3)数据链路层的两个子层</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-适配器的作用"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">(4)适配器的作用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2CSMA-CD协议"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.3.2CSMA/CD协议</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-以太网的广播方式发送"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">(1)以太网的广播方式发送</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-以太网采取两种重要的措施-一"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">(2)以太网采取两种重要的措施(一)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-碰撞检测"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">(3)碰撞检测</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#争用期"><span class="nav-number">1.3.2.3.1.</span> <span class="nav-text">争用期</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#截断二进制指数退避算法-truncated-binary-exponential-type"><span class="nav-number">1.3.2.3.2.</span> <span class="nav-text">截断二进制指数退避算法 (truncated binary exponential type)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#争用期的长度和最小帧长"><span class="nav-number">1.3.2.3.3.</span> <span class="nav-text">争用期的长度和最小帧长</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#强化碰撞"><span class="nav-number">1.3.2.3.4.</span> <span class="nav-text">强化碰撞</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-CSMA-CD协议的要点"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">(4)CSMA/CD协议的要点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-3使用集线器的星形拓扑"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3.3使用集线器的星形拓扑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-4以太网的信道利用率"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.3.4以太网的信道利用率</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-参数-a"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">(1)参数 a</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-信道利用率的最大值-Smax"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">(2)信道利用率的最大值 Smax</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-5以太网的-MAC-层"><span class="nav-number">1.3.5.</span> <span class="nav-text">3.3.5以太网的 MAC 层</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-MAC地址组成"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">(1)MAC地址组成</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#单站地址，组地址，广播地址"><span class="nav-number">1.3.5.1.1.</span> <span class="nav-text">单站地址，组地址，广播地址</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#全球管理与本地管理"><span class="nav-number">1.3.5.1.2.</span> <span class="nav-text">全球管理与本地管理</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#适配器检查MAC"><span class="nav-number">1.3.5.1.3.</span> <span class="nav-text">适配器检查MAC</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-MAC-帧的格式"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">(2)MAC 帧的格式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#格式"><span class="nav-number">1.3.5.2.1.</span> <span class="nav-text">格式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#无效的-MAC-帧"><span class="nav-number">1.3.5.2.2.</span> <span class="nav-text">无效的 MAC 帧</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#帧间最小间隔"><span class="nav-number">1.3.5.2.3.</span> <span class="nav-text">帧间最小间隔</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-扩展的以太网"><span class="nav-number">1.4.</span> <span class="nav-text">3.4 扩展的以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-1在物理层扩展以太网"><span class="nav-number">1.4.1.</span> <span class="nav-text">3.4.1在物理层扩展以太网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-2在数据链路层扩展以太网"><span class="nav-number">1.4.2.</span> <span class="nav-text">3.4.2在数据链路层扩展以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#以太交换机的特点"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">以太交换机的特点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#交换机的交换方式"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">交换机的交换方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#交换机的自学习算法-处理收到的帧和建立转发表"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">交换机的自学习算法 处理收到的帧和建立转发表</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#回路和生成树算法"><span class="nav-number">1.4.2.3.1.</span> <span class="nav-text">回路和生成树算法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-3虚拟局域网"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.4.3虚拟局域网</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-高速以太网"><span class="nav-number">1.5.</span> <span class="nav-text">3.5 高速以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#100BASE-T-以太网"><span class="nav-number">1.5.1.</span> <span class="nav-text">100BASE-T 以太网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#吉比特以太网"><span class="nav-number">1.5.2.</span> <span class="nav-text">吉比特以太网</span></a></li></ol></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love" id="heart"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">峻源</span></div><span>本站已运行<span id="showDays"></span></span><script>var seconds=1e3,minutes=60*seconds,hours=60*minutes,days=24*hours,years=365*days,birthDay=Date.UTC(2019,8,1,14,0,0);setInterval(function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),h=Date.UTC(s,t,a,o,r,n),u=h-birthDay,d=Math.floor(u/years),y=Math.floor(u/days-365*d),i=Math.floor((u-(365*d+y)*days)/hours),l=Math.floor((u-(365*d+y)*days-i*hours)/minutes),M=Math.floor((u-(365*d+y)*days-i*hours-l*minutes)/seconds);document.getElementById("showDays").innerHTML=""+d+"年"+y+"天"+i+"小时"+l+"分钟"+M+"秒"},1e3)</script><div><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_uv">访问人数：<span id="busuanzi_value_site_uv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-eye"></i> <span id="busuanzi_container_site_pv">总访问量：<span id="busuanzi_value_site_pv"></span> </span>&nbsp;|&nbsp; <i class="fa fa-pencil"></i> <span class="post-count">博客全站共 453.9k 字</span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/affix.js?v=7.2.0"></script><script src="/js/schemes/pisces.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script>window.livereOptions={refer:"posts/aaf5fde3/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><link rel="stylesheet" href="/dist/APlayer.min.css"><div id="aplayer"></div><script type="text/javascript" src="/dist/APlayer.min.js"></script><script type="text/javascript" src="/dist/music.js"></script><script type="text/javascript" src="/js/firework.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":220,"height":400},"mobile":{"show":false},"react":{"opacity":0.9},"log":false});</script></body></html><!-- rebuild by neat -->